import{j as e}from"./ui-BFkRrjhf.js";import{r as s}from"./vendor-ClsjX3Mm.js";import{C as a,b as i,c as r,d as t,a as n}from"./card-COhXL4y3.js";import{T as l,a as c,b as o,c as d}from"./tabs-C0D04NFg.js";import{u as h,B as m}from"./index-CgruMJ9X.js";import{I as x}from"./input-K7STGv4F.js";import{L as u}from"./label-D_0g-RlU.js";import{S as j}from"./switch-lAlXyh6p.js";import{T as p}from"./textarea-Cg6ZmrUp.js";import{S as g,a as v,b as y,c as f,d as N}from"./select-BhEU0EIQ.js";import{A as w}from"./AdminLayout-BWmn8TIL.js";import{g as C,u as b}from"./settings-BRYmnd1O.js";import{s as S}from"./siteConfig-BOV2ERHg.js";import{ai as k,a8 as F,S as P,aG as T,az as A,a6 as q}from"./icons-Udnp6KR8.js";import"./charts-DeubIqjP.js";import"./scroll-area-DkFg0wM_.js";const E=()=>{const{toast:E}=h(),[L,U]=s.useState(!1),[V,M]=s.useState(!0),[R,D]=s.useState({siteName:S.company.name,siteDescription:S.company.tagline,supportEmail:S.contact.supportEmail,language:"en",timezone:"UTC"}),[z,G]=s.useState({emailNotifications:!0,newUserAlerts:!0,lessonCompletionAlerts:!1,systemAlerts:!0,weeklyReports:!0,monthlyReports:!0}),[I,B]=s.useState({requireEmailVerification:!0,enableTwoFactor:!1,sessionTimeout:"60",passwordMinLength:"8",requireStrongPassword:!0}),[_,K]=s.useState({theme:"system",primaryColor:"#8b5cf6",logoUrl:""}),[O,W]=s.useState({backupFrequency:"daily",coursesPerPage:12});s.useEffect(()=>{(async()=>{try{M(!0);const e=await C();D(e.general),G(e.notifications),B({requireEmailVerification:e.security.requireEmailVerification,enableTwoFactor:e.security.enableTwoFactor,sessionTimeout:String(e.security.sessionTimeout??60),passwordMinLength:String(e.security.passwordMinLength??8),requireStrongPassword:e.security.requireStrongPassword}),K(e.appearance),W(e.advanced)}catch(e){E({title:"Failed to load settings",description:"Please try again.",variant:"destructive"})}finally{M(!1)}})()},[E]);const $=async e=>{try{U(!0);let s={};"general"===e&&(s=R),"notifications"===e&&(s=z),"security"===e&&(s={requireEmailVerification:I.requireEmailVerification,enableTwoFactor:I.enableTwoFactor,sessionTimeout:parseInt(I.sessionTimeout||"60",10),passwordMinLength:parseInt(I.passwordMinLength||"8",10),requireStrongPassword:I.requireStrongPassword}),"appearance"===e&&(s=_),"advanced"===e&&(s=O);const a=await b(e,s);D(a.general),G(a.notifications),B({requireEmailVerification:a.security.requireEmailVerification,enableTwoFactor:a.security.enableTwoFactor,sessionTimeout:String(a.security.sessionTimeout??60),passwordMinLength:String(a.security.passwordMinLength??8),requireStrongPassword:a.security.requireStrongPassword}),K(a.appearance),W(a.advanced),E({title:"Settings Saved",description:`${e[0].toUpperCase()}${e.slice(1)} settings have been updated successfully.`})}catch(s){E({title:"Error",description:"Failed to save settings. Please try again.",variant:"destructive"})}finally{U(!1)}};return e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your platform configuration and preferences"})]}),e.jsxs(l,{defaultValue:"general",className:"space-y-4",children:[e.jsxs(c,{className:"grid w-full grid-cols-5",children:[e.jsxs(o,{value:"general",className:"gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"General"]}),e.jsxs(o,{value:"notifications",className:"gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Notifications"]}),e.jsxs(o,{value:"security",className:"gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Security"]}),e.jsxs(o,{value:"appearance",className:"gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Appearance"]}),e.jsxs(o,{value:"advanced",className:"gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Advanced"]})]}),e.jsx(d,{value:"general",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"General Settings"}),e.jsx(t,{children:"Basic platform configuration and information"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"siteName",children:"Site Name"}),e.jsx(x,{id:"siteName",value:R.siteName,onChange:e=>D({...R,siteName:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"siteDescription",children:"Site Description"}),e.jsx(p,{id:"siteDescription",value:R.siteDescription,onChange:e=>D({...R,siteDescription:e.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"supportEmail",children:"Support Email"}),e.jsx(x,{id:"supportEmail",type:"email",value:R.supportEmail,onChange:e=>D({...R,supportEmail:e.target.value})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"language",children:"Default Language"}),e.jsxs(g,{value:R.language,onValueChange:e=>D({...R,language:e}),children:[e.jsx(v,{id:"language",children:e.jsx(y,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"en",children:"English"}),e.jsx(N,{value:"es",children:"Spanish"}),e.jsx(N,{value:"fr",children:"French"}),e.jsx(N,{value:"de",children:"German"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(g,{value:R.timezone,onValueChange:e=>D({...R,timezone:e}),children:[e.jsx(v,{id:"timezone",children:e.jsx(y,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"UTC",children:"UTC"}),e.jsx(N,{value:"America/New_York",children:"Eastern Time"}),e.jsx(N,{value:"America/Chicago",children:"Central Time"}),e.jsx(N,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),e.jsxs(m,{onClick:()=>$("general"),disabled:L||V,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),L?"Saving...":"Save Changes"]})]})]})}),e.jsx(d,{value:"notifications",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Notification Preferences"}),e.jsx(t,{children:"Manage how and when you receive notifications"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(j,{checked:z.emailNotifications,onCheckedChange:e=>G({...z,emailNotifications:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"New User Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when new users register"})]}),e.jsx(j,{checked:z.newUserAlerts,onCheckedChange:e=>G({...z,newUserAlerts:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Lesson Completion Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications when students complete lessons"})]}),e.jsx(j,{checked:z.lessonCompletionAlerts,onCheckedChange:e=>G({...z,lessonCompletionAlerts:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"System Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Important system notifications and updates"})]}),e.jsx(j,{checked:z.systemAlerts,onCheckedChange:e=>G({...z,systemAlerts:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive weekly performance reports"})]}),e.jsx(j,{checked:z.weeklyReports,onCheckedChange:e=>G({...z,weeklyReports:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Monthly Reports"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive monthly analytics reports"})]}),e.jsx(j,{checked:z.monthlyReports,onCheckedChange:e=>G({...z,monthlyReports:e})})]})]}),e.jsxs(m,{onClick:()=>$("notifications"),disabled:L||V,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),L?"Saving...":"Save Changes"]})]})]})}),e.jsx(d,{value:"security",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Security Settings"}),e.jsx(t,{children:"Manage authentication and security preferences"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Email Verification Required"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address"})]}),e.jsx(j,{checked:I.requireEmailVerification,onCheckedChange:e=>B({...I,requireEmailVerification:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable 2FA for admin accounts"})]}),e.jsx(j,{checked:I.enableTwoFactor,onCheckedChange:e=>B({...I,enableTwoFactor:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Require Strong Passwords"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enforce strong password requirements"})]}),e.jsx(j,{checked:I.requireStrongPassword,onCheckedChange:e=>B({...I,requireStrongPassword:e})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),e.jsx(x,{id:"sessionTimeout",type:"number",value:I.sessionTimeout,onChange:e=>B({...I,sessionTimeout:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"passwordMinLength",children:"Minimum Password Length"}),e.jsx(x,{id:"passwordMinLength",type:"number",value:I.passwordMinLength,onChange:e=>B({...I,passwordMinLength:e.target.value})})]})]}),e.jsxs(m,{onClick:()=>$("security"),disabled:L||V,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),L?"Saving...":"Save Changes"]})]})]})}),e.jsx(d,{value:"appearance",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Appearance Settings"}),e.jsx(t,{children:"Customize the look and feel of your platform"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"theme",children:"Theme"}),e.jsxs(g,{value:_.theme,onValueChange:e=>K({..._,theme:e}),children:[e.jsx(v,{id:"theme",children:e.jsx(y,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"light",children:"Light"}),e.jsx(N,{value:"dark",children:"Dark"}),e.jsx(N,{value:"system",children:"System"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{id:"primaryColor",type:"color",className:"w-20 h-10",value:_.primaryColor,onChange:e=>K({..._,primaryColor:e.target.value})}),e.jsx(x,{value:_.primaryColor,readOnly:!0,className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"logoUrl",children:"Platform Logo URL"}),e.jsx(x,{id:"logoUrl",type:"text",value:_.logoUrl,onChange:e=>K({..._,logoUrl:e.target.value}),placeholder:"https://..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Provide a public URL to your logo image (PNG/SVG)"})]}),e.jsxs(m,{onClick:()=>$("appearance"),disabled:L||V,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),L?"Saving...":"Save Changes"]})]})]})}),e.jsx(d,{value:"advanced",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Advanced Settings"}),e.jsx(t,{children:"Advanced configuration options and system settings"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"databaseUrl",children:"Database Connection"}),e.jsx(x,{id:"databaseUrl",type:"text",placeholder:"postgresql://...",readOnly:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Database connection string (read-only)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"apiKey",children:"API Key"}),e.jsx(x,{id:"apiKey",type:"password",value:"sk_live_••••••••••••",readOnly:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"API key for external integrations"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"backupFrequency",children:"Backup Frequency"}),e.jsxs(g,{value:O.backupFrequency,onValueChange:e=>W({...O,backupFrequency:e}),children:[e.jsx(v,{id:"backupFrequency",children:e.jsx(y,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"hourly",children:"Hourly"}),e.jsx(N,{value:"daily",children:"Daily"}),e.jsx(N,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"coursesPerPage",children:"Courses Per Page (Browse)"}),e.jsxs(g,{value:String(O.coursesPerPage),onValueChange:e=>W({...O,coursesPerPage:Number(e)}),children:[e.jsx(v,{id:"coursesPerPage",children:e.jsx(y,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"6",children:"6 courses"}),e.jsx(N,{value:"12",children:"12 courses"}),e.jsx(N,{value:"18",children:"18 courses"}),e.jsx(N,{value:"24",children:"24 courses"}),e.jsx(N,{value:"36",children:"36 courses"}),e.jsx(N,{value:"48",children:"48 courses"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of courses to display per page on the browse page"})]}),e.jsxs(m,{onClick:()=>$("advanced"),disabled:L||V,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),L?"Saving...":"Save Changes"]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-medium text-destructive",children:"Danger Zone"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{variant:"outline",disabled:!0,className:"w-full justify-start text-destructive border-destructive hover:bg-destructive hover:text-destructive-foreground",children:"Clear All Cache"}),e.jsx(m,{variant:"outline",onClick:()=>$("advanced"),disabled:L||V,className:"w-full justify-start text-destructive border-destructive hover:bg-destructive hover:text-destructive-foreground",children:"Reset All Settings"})]})]})]})]})})]})]})})};export{E as default};
