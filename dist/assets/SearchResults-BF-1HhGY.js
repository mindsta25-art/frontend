import{j as e}from"./ui-BFkRrjhf.js";import{i as s,h as a,r as t}from"./vendor-ClsjX3Mm.js";import{S as l}from"./StudentHeader-BEY8Ekm7.js";import{S as i}from"./StudentFooter-C3Tmumug.js";import{C as r,a as n}from"./card-COhXL4y3.js";import{f as o,s as c}from"./siteConfig-BOV2ERHg.js";import{a as d,d as m,e as x,B as h}from"./index-CgruMJ9X.js";import{B as u}from"./badge-CO1u2g-4.js";import{I as j}from"./input-K7STGv4F.js";import{S as g,a as f,b as p,c as b,d as v}from"./select-BhEU0EIQ.js";import{getAllLessons as N}from"./lessons-BDW73QPv.js";import{m as y,A as w}from"./animations-B9X9lRsG.js";import{O as C,X as S,a1 as k,L,B as A,t as F,z as $}from"./icons-Udnp6KR8.js";import"./separator-D-EoJ3Ty.js";import"./scroll-area-DkFg0wM_.js";import"./formatDistanceToNow-Bf1kdoXg.js";import"./mindsta2-LbsrOUWs.js";import"./charts-DeubIqjP.js";const z={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};function E(){const[E,G]=s(),I=a(),{user:T}=d(),{addToCart:D,isInCart:V}=m(),{addToWishlist:W,isInWishlist:q}=x(),[H,O]=t.useState(E.get("q")||""),[P,R]=t.useState([]),[Q,U]=t.useState([]),[X,Y]=t.useState(!0),[_,J]=t.useState("all"),[K,M]=t.useState("all"),[Z,ee]=t.useState("all");t.useEffect(()=>{(async()=>{Y(!0);try{const e=await N();R(e||[])}catch(e){}finally{Y(!1)}})()},[]),t.useEffect(()=>{let e=[...P];if(H.trim()){const s=H.toLowerCase();e=e.filter(e=>{var a,t,l;return(null==(a=e.title)?void 0:a.toLowerCase().includes(s))||(null==(t=e.description)?void 0:t.toLowerCase().includes(s))||(null==(l=e.subject)?void 0:l.toLowerCase().includes(s))})}"all"!==_&&(e=e.filter(e=>e.grade===_)),"all"!==K&&(e=e.filter(e=>e.subject===K)),"all"!==Z&&(e=e.filter(e=>{var s;return(null==(s=e.difficulty)?void 0:s.toLowerCase())===Z.toLowerCase()})),U(e)},[H,P,_,K,Z]);const se=Array.from(new Set(P.map(e=>e.subject))).sort(),ae=()=>{J("all"),M("all"),ee("all")},te={beginner:"bg-green-500",intermediate:"bg-yellow-500",advanced:"bg-red-500"},le=[_,K,Z].filter(e=>"all"!==e).length;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(l,{studentName:null==T?void 0:T.fullName}),e.jsxs("main",{className:"pt-20 sm:pt-24 pb-12 sm:pb-16 container mx-auto px-4 sm:px-6",children:[e.jsxs(y.div,{initial:"hidden",animate:"visible",variants:z,className:"mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Search Results"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),H.trim()&&G({q:H})},className:"relative mb-6",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(j,{type:"text",placeholder:"Search for lessons, subjects, topics...",value:H,onChange:e=>O(e.target.value),className:"pl-12 pr-4 h-12 text-base"}),H&&e.jsx(h,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>{O(""),G({})},children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx(r,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(k,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold text-sm",children:"Filters"}),le>0&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{variant:"secondary",className:"ml-auto",children:[le," active"]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:ae,className:"h-7 text-xs",children:"Clear all"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Grade"}),e.jsxs(g,{value:_,onValueChange:J,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All grades"})}),e.jsxs(b,{children:[e.jsx(v,{value:"all",children:"All Grades"}),["1","2","3","4","5","6","Common Entrance"].map(s=>e.jsx(v,{value:s,children:"Common Entrance"===s?s:`Grade ${s}`},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Subject"}),e.jsxs(g,{value:K,onValueChange:M,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All subjects"})}),e.jsxs(b,{children:[e.jsx(v,{value:"all",children:"All Subjects"}),se.map(s=>e.jsx(v,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Difficulty"}),e.jsxs(g,{value:Z,onValueChange:ee,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All levels"})}),e.jsxs(b,{children:[e.jsx(v,{value:"all",children:"All Levels"}),e.jsx(v,{value:"beginner",children:"Beginner"}),e.jsx(v,{value:"intermediate",children:"Intermediate"}),e.jsx(v,{value:"advanced",children:"Advanced"})]})]})]})]})]})})]}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:X?"Searching...":e.jsxs(e.Fragment,{children:["Found ",e.jsx("strong",{children:Q.length})," ",1===Q.length?"result":"results",H&&e.jsxs(e.Fragment,{children:[' for "',e.jsx("strong",{children:H}),'"']})]})})}),X&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(L,{className:"w-8 h-8 animate-spin text-indigo-600"})}),!X&&0===Q.length&&e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-20",children:[e.jsx(C,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filters to find what you're looking for"}),e.jsx(h,{onClick:ae,children:"Clear Filters"})]}),!X&&Q.length>0&&e.jsx(y.div,{variants:B,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:e.jsx(w,{children:Q.map(s=>{return e.jsx(y.div,{variants:z,layout:!0,exit:{opacity:0,scale:.9},whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:e.jsx(r,{className:"h-full hover:shadow-xl transition-shadow group cursor-pointer overflow-hidden",children:e.jsxs("div",{onClick:()=>{const e=s.subject.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");I(`/grade/${s.grade}/${e}/lesson/${s.id}`)},children:[e.jsxs("div",{className:"h-40 bg-gradient-to-br from-blue-500 via-indigo-500 to-cyan-500 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(A,{className:"w-12 h-12 text-white opacity-90"})}),s.difficulty&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx(u,{className:`text-xs font-semibold ${te[s.difficulty.toLowerCase()]||"bg-gray-500"}`,children:s.difficulty})}),s.duration&&e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsxs(u,{variant:"secondary",className:"text-xs gap-1 bg-white/90",children:[e.jsx(F,{className:"w-3 h-3"}),s.duration," min"]})})]}),e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(u,{variant:"outline",className:"text-xs",children:s.subject}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Grade ",s.grade]})]}),e.jsx("h3",{className:"font-bold text-sm mb-2 group-hover:text-indigo-600 transition-colors line-clamp-2 leading-tight",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-indigo-600",children:(a=s.price,o(a||c.defaults.lessonPrice))}),e.jsx($,{className:"w-4 h-4 text-indigo-600 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})]})]})})},s.id);var a})})})]}),e.jsx(i,{})]})}export{E as default};
