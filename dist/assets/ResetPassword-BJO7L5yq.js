import{j as e}from"./ui-BFkRrjhf.js";import{i as s,r as t,h as a}from"./vendor-ClsjX3Mm.js";import{C as r}from"./card-COhXL4y3.js";import{I as i}from"./input-K7STGv4F.js";import{L as o}from"./label-D_0g-RlU.js";import{u as n,B as d,c as l}from"./index-CgruMJ9X.js";import{m as c}from"./mindsta2-LbsrOUWs.js";import"./charts-DeubIqjP.js";import"./icons-Udnp6KR8.js";const m=()=>{const[m]=s(),p=m.get("token")||"",[u,h]=t.useState(""),[x,f]=t.useState(""),[j,w]=t.useState(!1),{toast:v}=n(),b=a();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-background dark:via-muted dark:to-background flex items-center justify-center p-4",children:e.jsxs(r,{className:"w-full max-w-md p-8 bg-white/95 dark:bg-card shadow-2xl border-4 border-purple-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-block p-3 rounded-2xl bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 mb-3",children:e.jsx("img",{src:c,alt:"Mindsta Logo",className:"w-12 h-12 object-contain"})}),e.jsx("h1",{className:"text-2xl font-black",children:"Reset your password"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),p)if(!u||u.length<8)v({title:"Weak password",description:"Password must be at least 8 characters.",variant:"destructive"});else if(u===x){w(!0);try{await l(p,u),v({title:"Password updated",description:"You can now log in with your new password."}),b("/auth?mode=login")}catch(s){v({title:"Reset failed",description:(null==s?void 0:s.message)||"Invalid or expired link.",variant:"destructive"})}finally{w(!1)}}else v({title:"Password mismatch",description:"Passwords do not match.",variant:"destructive"});else v({title:"Invalid link",description:"Reset token is missing.",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"New Password"}),e.jsx(i,{id:"password",type:"password",value:u,onChange:e=>h(e.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"At least 8 characters."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(i,{id:"confirmPassword",type:"password",value:x,onChange:e=>f(e.target.value)})]}),e.jsx(d,{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white font-black py-6",children:j?"Updating...":"Update Password"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{type:"button",onClick:()=>b("/auth?mode=login"),className:"text-sm text-purple-600 underline",children:"Back to login"})})]})]})})};export{m as default};
