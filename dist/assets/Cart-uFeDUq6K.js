import{j as s}from"./ui-BFkRrjhf.js";import{h as e,r as a}from"./vendor-ClsjX3Mm.js";import{a as t,d as l,B as r}from"./index-CgruMJ9X.js";import{S as m,g as i}from"./StudentHeader-BEY8Ekm7.js";import{W as n}from"./WhatsAppButton-C771FwVp.js";import{C as c,a as d}from"./card-COhXL4y3.js";import{S as o}from"./separator-D-EoJ3Ty.js";import{getSubjectsByGrade as x}from"./lessons-BDW73QPv.js";import{f as h}from"./siteConfig-BOV2ERHg.js";import{J as u,B as p,f as j,a7 as g,z as f,aa as N}from"./icons-Udnp6KR8.js";import"./charts-DeubIqjP.js";import"./input-K7STGv4F.js";import"./badge-CO1u2g-4.js";import"./select-BhEU0EIQ.js";import"./scroll-area-DkFg0wM_.js";import"./formatDistanceToNow-Bf1kdoXg.js";const b=()=>{const{user:b,loading:v}=t(),{cart:w,cartCount:y,loading:k,removeFromCart:C,clearCart:S}=l(),z=e(),[B,P]=a.useState(""),[E,_]=a.useState([]),[A,F]=a.useState(!1);if(a.useEffect(()=>{v||b||z("/auth")},[b,v,z]),a.useEffect(()=>{(async()=>{if(b)try{const s=await i(b.id);s&&P(s.fullName)}catch(s){}})()},[b]),a.useEffect(()=>{(async()=>{if((null==w?void 0:w.items)&&0!==w.items.length){F(!0);try{const s=await Promise.all(w.items.map(async s=>{try{const e=(await x(s.grade,s.term)).find(e=>e.name===s.subject);return{...s,price:(null==e?void 0:e.price)||0,lessonCount:(null==e?void 0:e.lessonCount)||0,rating:(null==e?void 0:e.rating)||0,enrolledStudents:(null==e?void 0:e.enrolledStudents)||0,duration:(null==e?void 0:e.duration)||0}}catch(e){return s}}));_(s)}catch(s){_(w.items)}finally{F(!1)}}else _([])})()},[null==w?void 0:w.items]),v||k)return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(m,{studentName:B}),s.jsx("div",{className:"pt-24 container mx-auto px-4",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-800 rounded w-1/4"}),s.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-800 rounded"})]})})]});const L=!w||0===w.items.length,M=E.reduce((s,e)=>s+e.price,0);return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(m,{studentName:B}),s.jsx("main",{className:"pt-24 pb-16 container mx-auto px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:"Shopping Cart"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:L?"Your cart is empty":`${y} ${1===y?"item":"items"} in your cart`})]}),L?s.jsx(c,{className:"p-8 sm:p-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block p-4 sm:p-6 bg-muted rounded-full mb-4 sm:mb-6",children:s.jsx(u,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4 sm:mb-6",children:"Start adding courses to your cart and checkout when you're ready"}),s.jsxs(r,{onClick:()=>z("/browse"),size:"lg",className:"gap-2 w-full sm:w-auto",children:[s.jsx(p,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Browse Courses"]})]})}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-3 sm:space-y-4",children:[E.map(e=>s.jsx(c,{className:"overflow-hidden hover:shadow-md transition-shadow",children:s.jsx(d,{className:"p-4",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"relative w-28 h-16 sm:w-32 sm:h-18 bg-gradient-to-br from-purple-500 via-purple-600 to-purple-700 rounded flex-shrink-0 overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(p,{className:"w-8 h-8 text-white opacity-90"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1 line-clamp-2",children:e.subject}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Grade ",e.grade]}),e.term&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["• ",e.term]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-2",children:[e.rating>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold text-orange-600",children:e.rating.toFixed(1)}),s.jsx(j,{className:"w-3 h-3 fill-orange-400 text-orange-400"})]}),e.lessonCount>0&&s.jsxs("span",{children:["• ",e.lessonCount," lessons"]}),e.duration>0&&s.jsxs("span",{children:["• ",Math.ceil(e.duration/60)," total hours"]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(r,{variant:"link",size:"sm",onClick:()=>C(e._id),className:"text-purple-600 hover:text-purple-700 p-0 h-auto font-semibold text-xs",children:"Remove"})})]}),s.jsx("div",{className:"flex flex-col items-end justify-start",children:s.jsxs("div",{className:"text-lg sm:text-xl font-bold text-purple-600",children:["₦",e.price.toLocaleString()]})})]})})},e._id)),y>1&&s.jsxs(r,{variant:"outline",onClick:S,className:"w-full text-sm sm:text-base",children:[s.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Clear Cart"]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(c,{className:"lg:sticky lg:top-24",children:s.jsxs(d,{className:"p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-6",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Subtotal (",y," ",1===y?"item":"items",")"]}),s.jsx("span",{className:"font-semibold",children:h(M)})]}),s.jsx(o,{}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-bold text-sm sm:text-base",children:"Total"}),s.jsx("span",{className:"text-xl sm:text-2xl font-bold",children:h(M)})]})]}),s.jsxs(r,{size:"lg",className:"w-full mb-3 gap-2 text-sm sm:text-base",onClick:()=>{z("/checkout")},children:["Proceed to Checkout",s.jsx(f,{className:"w-4 h-4 sm:w-5 sm:h-5"})]}),s.jsxs(r,{variant:"outline",size:"lg",className:"w-full gap-2 text-sm sm:text-base",onClick:()=>z("/dashboard"),children:[s.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Continue Shopping"]}),s.jsxs("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 text-xs sm:text-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Lifetime access to course materials"})]}),s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 text-xs sm:text-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"All quizzes and assessments included"})]}),s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 text-xs sm:text-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Progress tracking and certificates"})]})]})]})})})]})]})}),s.jsx(n,{})]})};export{b as default};
