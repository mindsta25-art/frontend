import{j as e,v as s,w as t,n as a,o as r,p as n,q as o,t as i,r as l,O as c,s as d,x as m,y as u,z as x,B as f,L as h,S as p,I as g,E as j,F as N,G as v,H as w,J as b,b as y,K as C,c as S,M as k,g as E,h as R,i as L,a as O,u as P,d as _,e as T,k as D}from"./ui-BFkRrjhf.js";import{r as z,h as $}from"./vendor-ClsjX3Mm.js";import{f as F,k as M,g as H,l as A,u as G,B as I,a as U,d as B,i as W}from"./index-CgruMJ9X.js";import{I as q}from"./input-K7STGv4F.js";import{B as K}from"./badge-CO1u2g-4.js";import{C as V,a as J}from"./card-COhXL4y3.js";import{S as Y}from"./separator-D-EoJ3Ty.js";import{S as Q,a as X,b as Z,c as ee,d as se}from"./select-BhEU0EIQ.js";import{S as te}from"./scroll-area-DkFg0wM_.js";import{X as ae,a8 as re,aB as ne,aC as oe,K as ie,aD as le,$ as ce,av as de,D as me,aE as ue,h as xe,B as fe,O as he,g as pe,z as ge,H as je,J as Ne,a7 as ve,a4 as we,ai as be,am as ye,c as Ce,aF as Se}from"./icons-Udnp6KR8.js";import{f as ke,g as Ee,a as Re,m as Le,b as Oe}from"./formatDistanceToNow-Bf1kdoXg.js";import{getAllLessons as Pe}from"./lessons-BDW73QPv.js";import{f as _e}from"./siteConfig-BOV2ERHg.js";const Te=async e=>{try{return await F.get(`/students/${e}`)}catch(s){return null}},De=async(e,s)=>{try{return await F.put(`/students/${e}/grade`,{grade:s})}catch(t){return null}},ze=async(e,s)=>{try{return await F.put(`/students/${e}/profile`,s)}catch(t){throw t}};function $e(...e){const s=e[0];if(1===e.length)return s;const t=()=>{const t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=t.reduce((s,{useScope:t,scopeName:a})=>({...s,...t(e)[`__scope${a}`]}),{});return z.useMemo(()=>({[`__scope${s.scopeName}`]:a}),[a])}};return t.scopeName=s.scopeName,t}var Fe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((s,t)=>{const a=M(`Primitive.${t}`),r=z.forwardRef((s,r)=>{const{asChild:n,...o}=s,i=n?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(i,{...o,ref:r})});return r.displayName=`Primitive.${t}`,{...s,[t]:r}},{}),Me={exports:{}},He={},Ae=z;var Ge="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},Ie=Ae.useState,Ue=Ae.useEffect,Be=Ae.useLayoutEffect,We=Ae.useDebugValue;function qe(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!Ge(e,t)}catch(a){return!0}}var Ke="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),a=Ie({inst:{value:t,getSnapshot:s}}),r=a[0].inst,n=a[1];return Be(function(){r.value=t,r.getSnapshot=s,qe(r)&&n({inst:r})},[e,t,s]),Ue(function(){return qe(r)&&n({inst:r}),e(function(){qe(r)&&n({inst:r})})},[e]),We(t),t};He.useSyncExternalStore=void 0!==Ae.useSyncExternalStore?Ae.useSyncExternalStore:Ke,Me.exports=He;var Ve=Me.exports;function Je(){return()=>{}}var Ye="Avatar",[Qe]=function(s,t=[]){let a=[];const r=()=>{const e=a.map(e=>z.createContext(e));return function(t){const a=(null==t?void 0:t[s])||e;return z.useMemo(()=>({[`__scope${s}`]:{...t,[s]:a}}),[t,a])}};return r.scopeName=s,[function(t,r){const n=z.createContext(r);n.displayName=t+"Context";const o=a.length;a=[...a,r];const i=t=>{var a;const{scope:r,children:i,...l}=t,c=(null==(a=null==r?void 0:r[s])?void 0:a[o])||n,d=z.useMemo(()=>l,Object.values(l));return e.jsx(c.Provider,{value:d,children:i})};return i.displayName=t+"Provider",[i,function(e,a){var i;const l=(null==(i=null==a?void 0:a[s])?void 0:i[o])||n,c=z.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${e}\` must be used within \`${t}\``)}]},$e(r,...t)]}(Ye),[Xe,Ze]=Qe(Ye),es=z.forwardRef((s,t)=>{const{__scopeAvatar:a,...r}=s,[n,o]=z.useState("idle");return e.jsx(Xe,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:e.jsx(Fe.span,{...r,ref:t})})});es.displayName=Ye;var ss="AvatarImage",ts=z.forwardRef((a,r)=>{const{__scopeAvatar:n,src:o,onLoadingStatusChange:i=()=>{},...l}=a,c=Ze(ss,n),d=function(e,{referrerPolicy:s,crossOrigin:a}){const r=Ve.useSyncExternalStore(Je,()=>!0,()=>!1),n=z.useRef(null),o=r?(n.current||(n.current=new window.Image),n.current):null,[i,l]=z.useState(()=>ns(o,e));return t(()=>{l(ns(o,e))},[o,e]),t(()=>{const e=e=>()=>{l(e)};if(!o)return;const t=e("loaded"),r=e("error");return o.addEventListener("load",t),o.addEventListener("error",r),s&&(o.referrerPolicy=s),"string"==typeof a&&(o.crossOrigin=a),()=>{o.removeEventListener("load",t),o.removeEventListener("error",r)}},[o,a,s]),i}(o,l),m=s(e=>{i(e),c.onImageLoadingStatusChange(e)});return t(()=>{"idle"!==d&&m(d)},[d,m]),"loaded"===d?e.jsx(Fe.img,{...l,ref:r,src:o}):null});ts.displayName=ss;var as="AvatarFallback",rs=z.forwardRef((s,t)=>{const{__scopeAvatar:a,delayMs:r,...n}=s,o=Ze(as,a),[i,l]=z.useState(void 0===r);return z.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(e)}},[r]),i&&"loaded"!==o.imageLoadingStatus?e.jsx(Fe.span,{...n,ref:t}):null});function ns(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}rs.displayName=as;var os=es,is=ts,ls=rs;const cs=z.forwardRef(({className:s,...t},a)=>e.jsx(os,{ref:a,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));cs.displayName=os.displayName;z.forwardRef(({className:s,...t},a)=>e.jsx(is,{ref:a,className:H("aspect-square h-full w-full",s),...t})).displayName=is.displayName;const ds=z.forwardRef(({className:s,...t},a)=>e.jsx(ls,{ref:a,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));ds.displayName=ls.displayName;const ms=a,us=r,xs=n,fs=z.forwardRef(({className:s,...t},a)=>e.jsx(c,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));fs.displayName=c.displayName;const hs=A("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ps=z.forwardRef(({side:s="right",className:t,children:a,...r},n)=>e.jsxs(xs,{children:[e.jsx(fs,{}),e.jsxs(o,{ref:n,className:H(hs({side:s}),t),...r,children:[a,e.jsxs(i,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ps.displayName=o.displayName;const gs=({className:s,...t})=>e.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",s),...t});gs.displayName="SheetHeader";const js=z.forwardRef(({className:s,...t},a)=>e.jsx(l,{ref:a,className:H("text-lg font-semibold text-foreground",s),...t}));js.displayName=l.displayName;z.forwardRef(({className:s,...t},a)=>e.jsx(d,{ref:a,className:H("text-sm text-muted-foreground",s),...t})).displayName=d.displayName;const Ns=()=>{const[s,t]=z.useState([]),[a,r]=z.useState(0),[n,o]=z.useState(!1),[i,l]=z.useState(!1),{toast:c}=G(),d=async()=>{try{const e=await Ee();t(e)}catch(e){}},m=async()=>{try{const e=await Re();r(e.count)}catch(e){}};z.useEffect(()=>{d(),m();const e=setInterval(()=>{m()},3e4);return()=>clearInterval(e)},[]),z.useEffect(()=>{n&&d()},[n]);const u=s=>{switch(s){case"warning":return e.jsx(de,{className:"w-5 h-5 text-orange-500"});case"success":return e.jsx(ce,{className:"w-5 h-5 text-green-500"});case"announcement":return e.jsx(le,{className:"w-5 h-5 text-blue-500"});case"update":return e.jsx(ie,{className:"w-5 h-5 text-purple-500"});default:return e.jsx(oe,{className:"w-5 h-5 text-gray-500"})}},x=e=>{switch(e){case"urgent":return"border-l-4 border-red-500 bg-red-50 dark:bg-red-950";case"high":return"border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-950";case"medium":return"border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-950";default:return"border-l-4 border-gray-300 bg-gray-50 dark:bg-gray-900"}};return e.jsxs(ms,{open:n,onOpenChange:o,children:[e.jsx(us,{asChild:!0,children:e.jsxs(I,{variant:"ghost",size:"icon",className:"relative","aria-label":"Notifications",children:[e.jsx(re,{className:"w-5 h-5"}),a>0&&e.jsx(K,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:a>9?"9+":a})]})}),e.jsxs(ps,{className:"w-full sm:w-[400px] p-0",children:[e.jsx(gs,{className:"p-4 sm:p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(js,{className:"text-lg sm:text-xl",children:"Notifications"}),a>0&&e.jsxs(I,{variant:"ghost",size:"sm",onClick:async()=>{try{l(!0),await Le(),t(s.map(e=>({...e,isRead:!0}))),r(0),c({title:"All notifications marked as read"})}catch(e){c({title:"Error",description:"Failed to mark all notifications as read",variant:"destructive"})}finally{l(!1)}},disabled:i,className:"text-xs sm:text-sm",children:[e.jsx(ne,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Mark all read"]})]})}),e.jsx(te,{className:"h-[calc(100vh-5rem)]",children:0===s.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-4",children:[e.jsx(re,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center",children:"No notifications yet"})]}):e.jsx("div",{className:"divide-y",children:s.map(n=>{var o,i;return e.jsx("div",{className:`p-3 sm:p-4 transition-colors hover:bg-muted/50 ${n.isRead?"":"bg-muted/30"} ${x(n.priority)}`,children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u(n.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm sm:text-base line-clamp-2",children:n.title}),!n.isRead&&e.jsx(K,{variant:"default",className:"flex-shrink-0 h-2 w-2 p-0 rounded-full"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 line-clamp-3",children:n.message}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:ke(new Date(n.createdAt),{addSuffix:!0})}),!n.isRead&&e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{await Oe(e),t(s.map(s=>s._id===e?{...s,isRead:!0}:s)),r(Math.max(0,a-1))}catch(n){}})(n._id),className:"h-6 text-xs px-2",children:"Mark read"})]}),(null==(o=n.metadata)?void 0:o.actionUrl)&&(null==(i=n.metadata)?void 0:i.actionLabel)&&e.jsxs(I,{variant:"link",size:"sm",className:"h-auto p-0 mt-2 text-xs sm:text-sm",onClick:()=>{window.location.href=n.metadata.actionUrl},children:[n.metadata.actionLabel," →"]})]})]})},n._id)})})})]})]})},vs=m,ws=u;z.forwardRef(({className:s,inset:t,children:a,...r},n)=>e.jsxs(j,{ref:n,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",s),...r,children:[a,e.jsx(me,{className:"ml-auto h-4 w-4"})]})).displayName=j.displayName;z.forwardRef(({className:s,...t},a)=>e.jsx(N,{ref:a,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})).displayName=N.displayName;const bs=z.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(x,{children:e.jsx(f,{ref:r,sideOffset:t,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));bs.displayName=f.displayName;const ys=z.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(g,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",s),...a}));ys.displayName=g.displayName;z.forwardRef(({className:s,children:t,checked:a,...r},n)=>e.jsxs(v,{ref:n,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(w,{children:e.jsx(ne,{className:"h-4 w-4"})})}),t]})).displayName=v.displayName;z.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(b,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(w,{children:e.jsx(ue,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=b.displayName;const Cs=z.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(h,{ref:r,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));Cs.displayName=h.displayName;const Ss=z.forwardRef(({className:s,...t},a)=>e.jsx(p,{ref:a,className:H("-mx-1 my-1 h-px bg-muted",s),...t}));var ks;Ss.displayName=p.displayName;var Es="HoverCard",[Rs]=S(Es,[y]),Ls=y(),[Os,Ps]=Rs(Es),_s=s=>{const{__scopeHoverCard:t,children:a,open:r,defaultOpen:n,onOpenChange:o,openDelay:i=700,closeDelay:l=300}=s,c=Ls(t),d=z.useRef(0),m=z.useRef(0),u=z.useRef(!1),x=z.useRef(!1),[f,h]=C({prop:r,defaultProp:n??!1,onChange:o,caller:Es}),p=z.useCallback(()=>{clearTimeout(m.current),d.current=window.setTimeout(()=>h(!0),i)},[i,h]),g=z.useCallback(()=>{clearTimeout(d.current),u.current||x.current||(m.current=window.setTimeout(()=>h(!1),l))},[l,h]),j=z.useCallback(()=>h(!1),[h]);return z.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(m.current)},[]),e.jsx(Os,{scope:t,open:f,onOpenChange:h,onOpen:p,onClose:g,onDismiss:j,hasSelectionRef:u,isPointerDownOnContentRef:x,children:e.jsx(k,{...c,children:a})})};_s.displayName=Es;var Ts="HoverCardTrigger",Ds=z.forwardRef((s,t)=>{const{__scopeHoverCard:a,...r}=s,n=Ps(Ts,a),o=Ls(a);return e.jsx(E,{asChild:!0,...o,children:e.jsx(R.a,{"data-state":n.open?"open":"closed",...r,ref:t,onPointerEnter:L(s.onPointerEnter,As(n.onOpen)),onPointerLeave:L(s.onPointerLeave,As(n.onClose)),onFocus:L(s.onFocus,n.onOpen),onBlur:L(s.onBlur,n.onClose),onTouchStart:L(s.onTouchStart,e=>e.preventDefault())})})});Ds.displayName=Ts;var[zs,$s]=Rs("HoverCardPortal",{forceMount:void 0}),Fs="HoverCardContent",Ms=z.forwardRef((s,t)=>{const a=$s(Fs,s.__scopeHoverCard),{forceMount:r=a.forceMount,...n}=s,o=Ps(Fs,s.__scopeHoverCard);return e.jsx(O,{present:r||o.open,children:e.jsx(Hs,{"data-state":o.open?"open":"closed",...n,onPointerEnter:L(s.onPointerEnter,As(o.onOpen)),onPointerLeave:L(s.onPointerLeave,As(o.onClose)),ref:t})})});Ms.displayName=Fs;var Hs=z.forwardRef((s,t)=>{const{__scopeHoverCard:a,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:i,...l}=s,c=Ps(Fs,a),d=Ls(a),m=z.useRef(null),u=P(t,m),[x,f]=z.useState(!1);return z.useEffect(()=>{if(x){const e=document.body;return ks=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=ks,e.style.webkitUserSelect=ks}}},[x]),z.useEffect(()=>{if(m.current){const e=()=>{f(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;""!==(null==(e=document.getSelection())?void 0:e.toString())&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),z.useEffect(()=>{if(m.current){(function(e){const s=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;t.nextNode();)s.push(t.currentNode);return s})(m.current).forEach(e=>e.setAttribute("tabindex","-1"))}}),e.jsx(_,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:L(o,e=>{e.preventDefault()}),onDismiss:c.onDismiss,children:e.jsx(T,{...d,...l,onPointerDown:L(l.onPointerDown,e=>{e.currentTarget.contains(e.target)&&f(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:u,style:{...l.style,userSelect:x?"text":void 0,WebkitUserSelect:x?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})});function As(e){return s=>"touch"===s.pointerType?void 0:e()}z.forwardRef((s,t)=>{const{__scopeHoverCard:a,...r}=s,n=Ls(a);return e.jsx(D,{...n,...r,ref:t})}).displayName="HoverCardArrow";var Gs=Ms;const Is=_s,Us=Ds,Bs=z.forwardRef(({className:s,align:t="center",sideOffset:a=4,...r},n)=>e.jsx(Gs,{ref:n,align:t,sideOffset:a,className:H("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));Bs.displayName=Gs.displayName;const Ws=z.memo(({studentName:s})=>{const t=$(),{user:a,refreshUser:r}=U(),{cart:n,cartCount:o,removeFromCart:i}=B(),{wishlistCount:l}=function(){try{const{useWishlist:e}=require("@/contexts/WishlistContext");return e()}catch{return{wishlistCount:0}}}(),{toast:c}=G(),[d,m]=z.useState(!1),[u,x]=z.useState(""),[f,h]=z.useState([]),[p,g]=z.useState(!1),[j,N]=z.useState([]),[v,w]=z.useState(!1),[b,y]=z.useState(!1),C=z.useRef(null),[S,k]=z.useState(""),[E,R]=z.useState(!1),L=s||(null==a?void 0:a.fullName)||"Student";z.useEffect(()=>{s&&(null==a?void 0:a.fullName)&&a.fullName},[s,null==a?void 0:a.fullName,L]),z.useEffect(()=>{(async()=>{if(null==a?void 0:a.id)try{const e=await Te(a.id);(null==e?void 0:e.grade)&&k(e.grade)}catch(e){}})()},[null==a?void 0:a.id]);const O=async e=>{if((null==a?void 0:a.id)&&!E)try{R(!0);await De(a.id,e)&&(k(e),c({title:"Grade Updated",description:"Your grade has been changed to "+("Common Entrance"===e?"Common Entrance":`Grade ${e}`)}),window.location.reload())}catch(s){c({title:"Error",description:"Failed to update grade. Please try again.",variant:"destructive"})}finally{R(!1)}},P=async()=>{try{W(),r(),t("/"),c({title:"Logged out successfully",description:"See you next time!"})}catch(e){c({title:"Error",description:"Failed to log out. Please try again.",variant:"destructive"})}},_=e=>{e.preventDefault(),u.trim()&&(t(`/search?q=${encodeURIComponent(u.trim())}`),m(!1),g(!1))};z.useEffect(()=>{const e=setTimeout(async()=>{try{const e=await Pe();N(e||[])}catch(e){}},500);return()=>clearTimeout(e)},[]),z.useEffect(()=>{if(u.trim()&&j.length>0){const e=u.toLowerCase(),s=j.filter(s=>{var t,a,r;return(null==(t=s.title)?void 0:t.toLowerCase().includes(e))||(null==(a=s.description)?void 0:a.toLowerCase().includes(e))||(null==(r=s.subject)?void 0:r.toLowerCase().includes(e))}).slice(0,5);h(s),g(s.length>0)}else h([]),g(!1)},[u,j]),z.useEffect(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return z.useEffect(()=>{if(l>0){w(!0);const e=setTimeout(()=>w(!1),250);return()=>clearTimeout(e)}},[l]),z.useEffect(()=>{if(o>0){y(!0);const e=setTimeout(()=>y(!1),250);return()=>clearTimeout(e)}},[o]),e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 shadow-sm border-b z-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx("img",{src:"/assets/mindsta2-DyLq6Iuk.png",alt:"Logo",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg object-contain"}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-cyan-500 bg-clip-text text-transparent hidden sm:inline",children:"Mindsta"})]}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-6",children:[e.jsx(I,{variant:"ghost",onClick:()=>t("/home"),className:"font-medium",children:"Home"}),e.jsx(I,{variant:"ghost",onClick:()=>t("/browse"),className:"font-medium",children:"Browse Courses"}),e.jsx(I,{variant:"ghost",onClick:()=>t("/my-learning"),className:"font-medium",children:"My Learning"}),e.jsx(I,{variant:"ghost",onClick:()=>t("/grade-assessment"),className:"font-medium text-indigo-600 dark:text-indigo-400",children:"Find My Grade"}),e.jsxs(vs,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(I,{variant:"ghost",className:"font-medium",children:"Categories"})}),e.jsxs(bs,{align:"start",className:"w-56",children:[e.jsx(Cs,{children:"Browse by Subject"}),e.jsx(Ss,{}),e.jsxs(ys,{onClick:()=>t("/all-grades"),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"All Grades"]}),e.jsxs(ys,{onClick:()=>t("/all-subjects"),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"All Subjects"]})]})]})]})]}),e.jsx("div",{className:"hidden md:flex flex-1 max-w-xl mx-4",ref:C,children:e.jsxs("form",{onSubmit:_,className:"w-full relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(q,{type:"text",placeholder:"Search for lessons, subjects...",value:u,onChange:e=>x(e.target.value),onFocus:()=>u&&g(!0),className:"pl-10 w-full border-gray-300 dark:border-gray-700"}),p&&f.length>0&&e.jsx(V,{className:"absolute top-full mt-2 w-full shadow-lg border-2 z-50 max-h-96 overflow-auto",children:e.jsxs(J,{className:"p-0",children:[e.jsxs("div",{className:"p-2 bg-muted/30 border-b flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Top Results"})]}),f.map(s=>e.jsx("button",{onClick:()=>(e=>{const s=e.subject.toLowerCase().replace(/\s+/g,"-");t(`/grade/${e.grade}/${s}/lesson/${e.id}`),x(""),g(!1)})(s),className:"w-full p-3 hover:bg-muted/50 transition-colors text-left border-b last:border-b-0 group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-cyan-400 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1 line-clamp-1 group-hover:text-indigo-600 transition-colors",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1 mb-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"outline",className:"text-xs",children:s.subject}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Grade ",s.grade]})]})]}),e.jsx(ge,{className:"w-4 h-4 text-muted-foreground group-hover:text-indigo-600 group-hover:translate-x-1 transition-all flex-shrink-0"})]})},s.id)),e.jsxs("button",{onClick:_,className:"w-full p-3 bg-muted/30 hover:bg-muted/50 transition-colors text-center font-medium text-sm text-indigo-600",children:['View all results for "',u,'"']})]})})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{}),e.jsxs(I,{variant:"ghost",size:"icon",className:"flex relative",onClick:()=>t("/wishlist"),"aria-label":"Wishlist",children:[e.jsx(je,{className:"w-5 h-5"}),l>0&&e.jsx(K,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs transition-transform duration-200 "+(v?"scale-110":"scale-100"),children:l})]}),e.jsxs(Is,{openDelay:100,closeDelay:200,children:[e.jsx(Us,{asChild:!0,children:e.jsxs(I,{variant:"ghost",size:"icon",className:"flex relative",onClick:()=>t("/cart"),"aria-label":"Shopping cart",children:[e.jsx(Ne,{className:"w-5 h-5"}),o>0&&e.jsx(K,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs transition-transform duration-200 "+(b?"scale-110":"scale-100"),children:o})]})}),e.jsx(Bs,{className:"w-[calc(100vw-2rem)] sm:w-96 p-0",align:"end",sideOffset:8,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-base sm:text-lg",children:"Shopping Cart"}),e.jsxs(K,{variant:"secondary",className:"text-xs",children:[o," ",1===o?"item":"items"]})]})}),e.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto",children:n&&0!==n.items.length?e.jsx("div",{className:"divide-y",children:n.items.map(s=>e.jsx("div",{className:"p-3 sm:p-4 hover:bg-muted/50 transition-colors group",children:e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-indigo-400 to-pink-400 rounded flex-shrink-0 flex items-center justify-center",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-0.5 sm:mb-1 line-clamp-1",children:s.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-1.5 sm:mb-2",children:["Grade ",s.grade," ",s.term&&`• ${s.term}`]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-sm text-indigo-600",children:_e(s.price||0)}),e.jsxs(I,{variant:"ghost",size:"sm",className:"h-6 sm:h-7 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>{e.stopPropagation(),i(s._id)},children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})]})]})]})},s._id))}):e.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[e.jsx(Ne,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1.5 sm:mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add lessons to get started!"})]})}),n&&n.items.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsxs("div",{className:"p-3 sm:p-4 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("span",{className:"font-semibold text-sm sm:text-base",children:"Total:"}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-indigo-600",children:_e((null==n?void 0:n.items)?n.items.reduce((e,s)=>e+(s.price||0),0):0)})]}),e.jsxs(I,{className:"w-full gap-2 font-semibold text-sm sm:text-base",onClick:()=>t("/cart"),children:["Go to Cart",e.jsx(ge,{className:"w-4 h-4"})]})]})]})]})})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs(vs,{children:[e.jsx(ws,{asChild:!0,children:e.jsx(I,{variant:"ghost",className:"gap-2 px-2",children:e.jsx(cs,{className:"w-8 h-8",children:e.jsx(ds,{className:"bg-indigo-600 text-white text-sm font-semibold",children:(e=>{const s=e.split(" ");return s.length>1?`${s[0][0]}${s[s.length-1][0]}`.toUpperCase():e.substring(0,2).toUpperCase()})(L)})})})}),e.jsxs(bs,{align:"end",className:"w-64",children:[e.jsx(Cs,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:(e=>{const s=e.split(" ")[0];return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()})(L)}),e.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"My Account"})]})}),e.jsx(Ss,{}),e.jsxs("div",{className:"px-2 py-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1.5 block",children:"Current Grade"}),e.jsxs(Q,{value:S,onValueChange:O,disabled:E,children:[e.jsx(X,{className:"w-full h-9",children:e.jsx(Z,{placeholder:"Select grade..."})}),e.jsxs(ee,{children:[e.jsx(se,{value:"7",children:"Grade 7"}),e.jsx(se,{value:"8",children:"Grade 8"}),e.jsx(se,{value:"9",children:"Grade 9"}),e.jsx(se,{value:"Common Entrance",children:"Common Entrance"})]})]})]}),e.jsx(Ss,{}),e.jsxs(ys,{onClick:()=>t("/my-learning"),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"My Learning"]}),e.jsxs(ys,{onClick:()=>t("/profile"),children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Profile"]}),e.jsxs(ys,{onClick:()=>t("/settings"),children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsx(Ss,{}),e.jsxs(ys,{onClick:P,className:"text-red-600 dark:text-red-400",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]})}),e.jsx(I,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>m(!d),"aria-label":"Toggle menu",children:d?e.jsx(ae,{className:"w-6 h-6"}):e.jsx(Ce,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"md:hidden pb-3",children:e.jsxs("form",{onSubmit:_,className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(q,{type:"text",placeholder:"Search for lessons...",value:u,onChange:e=>x(e.target.value),className:"pl-10 w-full"})]})}),d&&e.jsxs("div",{className:"md:hidden border-t py-4 space-y-2 animate-in slide-in-from-top-5 duration-200",children:[e.jsxs("div",{className:"px-4 pb-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1.5 block",children:"Current Grade"}),e.jsxs(Q,{value:S,onValueChange:O,disabled:E,children:[e.jsx(X,{className:"w-full",children:e.jsx(Z,{placeholder:"Select grade..."})}),e.jsxs(ee,{children:[e.jsx(se,{value:"7",children:"Grade 7"}),e.jsx(se,{value:"8",children:"Grade 8"}),e.jsx(se,{value:"9",children:"Grade 9"}),e.jsx(se,{value:"Common Entrance",children:"Common Entrance"})]})]})]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/home"),m(!1)},className:"w-full justify-start",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Home"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/wishlist"),m(!1)},className:"w-full justify-start relative",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Wishlist",l>0&&e.jsx(K,{className:"ml-auto transition-transform duration-200 "+(v?"scale-110":"scale-100"),variant:"secondary",children:l})]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/cart"),m(!1)},className:"w-full justify-start relative",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Cart",o>0&&e.jsx(K,{className:"ml-auto transition-transform duration-200 "+(b?"scale-110":"scale-100"),variant:"secondary",children:o})]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/browse"),m(!1)},className:"w-full justify-start",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Browse Courses"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/my-learning"),m(!1)},className:"w-full justify-start",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"My Learning"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/grade-assessment"),m(!1)},className:"w-full justify-start text-indigo-600 dark:text-indigo-400",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Find My Grade"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/profile"),m(!1)},className:"w-full justify-start",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Profile"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{t("/settings"),m(!1)},className:"w-full justify-start",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(I,{variant:"ghost",onClick:()=>{P(),m(!1)},className:"w-full justify-start text-red-600 dark:text-red-400",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Log Out"]})]})]})})});export{cs as A,vs as D,Is as H,Ws as S,Us as a,Bs as b,ds as c,ze as d,ws as e,bs as f,Te as g,ys as h,De as u};
