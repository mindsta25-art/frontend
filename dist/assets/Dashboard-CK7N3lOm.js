var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{j as t}from"./ui-BFkRrjhf.js";import{r as a,h as r}from"./vendor-ClsjX3Mm.js";import{u as i,B as l,a as n,d as o,e as d}from"./index-CgruMJ9X.js";import{g as c,H as m,a as x,b as h,u as g,S as u}from"./StudentHeader-BEY8Ekm7.js";import{S as p}from"./StudentFooter-C3Tmumug.js";import{W as b}from"./WhatsAppButton-C771FwVp.js";import{C as j,a as f,b as v,c as N,d as y}from"./card-COhXL4y3.js";import{B as w}from"./badge-CO1u2g-4.js";import{P as k}from"./progress-BCMZ4yGb.js";import{S,a as C,b as $,c as A,d as D}from"./select-BhEU0EIQ.js";import{getTermsByGrade as M,getLessons as T,getSubjectsByGrade as L,getLessonsBySubjectAndGrade as E}from"./lessons-BDW73QPv.js";import{g as z,a as I}from"./enrollments-ZADooVCN.js";import{f as P}from"./siteConfig-BOV2ERHg.js";import{n as W,o as R,p as q,l as G,g as F,q as H,r as O,B as Y,s as V,h as B,t as K,u as _,H as Q,A as X,v as U,f as Z,Z as J,w as ee,x as se,y as te,C as ae,R as re,z as ie,D as le,J as ne,L as oe}from"./icons-Udnp6KR8.js";import{m as de,A as ce}from"./animations-B9X9lRsG.js";import"./charts-DeubIqjP.js";import"./input-K7STGv4F.js";import"./separator-D-EoJ3Ty.js";import"./scroll-area-DkFg0wM_.js";import"./formatDistanceToNow-Bf1kdoXg.js";import"./mindsta2-LbsrOUWs.js";const me=(e,s)=>[...e].sort((e,s)=>{const t="number"==typeof e.order?e.order:Number.MAX_SAFE_INTEGER,a="number"==typeof s.order?s.order:Number.MAX_SAFE_INTEGER;return t!==a?t-a:new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime()}).find(e=>!s.some(s=>s.lessonId===e.id&&s.completed)),xe=(e,s)=>{const t=a.useMemo(()=>{if(!e||0===e.length)return null;const s=e.filter(e=>e.completed).length,t=e.filter(e=>"number"==typeof e.quizScore).length,a=(e=>{const s=e.filter(e=>"number"==typeof e.quizScore);if(0===s.length)return 0;const t=s.reduce((e,s)=>e+(s.quizScore||0),0);return Math.round(t/s.length)})(e),{current:r,longest:i}=(e=>{const s=Array.from(new Set(e.map(e=>new Date(e.lastAccessedAt).toDateString()))).map(e=>new Date(e).getTime()).sort((e,s)=>e-s);let t=0,a=0,r=null;const i=(new Date).toDateString(),l=new Date(i).getTime(),n=864e5;for(const o of s)null===r||o-r===n?a+=1:(t=Math.max(t,a),a=1),r=o;return t=Math.max(t,a),s.includes(l)||s.includes(l-n)||(a=0),{current:a,longest:t}})(e),l=(e=>{const s=new Date,t=new Date(s);t.setDate(s.getDate()-7);const a=e.filter(e=>new Date(e.lastAccessedAt)>=t);return Math.min(100,Math.round(a.length/10*100))})(e),n=(e=>{const s=e.filter(e=>e.completed).length,t=e.filter(e=>"number"==typeof e.quizScore).reduce((e,s)=>e+(s.quizScore||0)/10*5,0);return 20*s+Math.round(t)})(e),o=((e,s)=>e>=85&&s>=20?"Gold Level":e>=70?"Silver Level":"Bronze Level")(a,s);return{totalLessonsCompleted:s,totalQuizzesTaken:t,averageScore:a,currentStreak:r,longestStreak:i,weeklyProgress:l,pointsEarned:n,rank:o}},[e,s]),r=a.useMemo(()=>(e=>{const s=new Date,t=864e5,a=[];for(let r=6;r>=0;r--){const i=new Date(s);i.setHours(0,0,0,0);const l=new Date(i.getTime()-r*t),n=new Date(l.getTime()+t),o=e.filter(e=>{const s=new Date(e.lastAccessedAt).getTime();return s>=l.getTime()&&s<n.getTime()}).length;a.push(o)}return a})(e),[e]);return{stats:t,weeklySeries:r}},he=["First Term","Second Term","Third Term"],ge=["bg-indigo-500","bg-cyan-500","bg-blue-500"],ue=[1,2,3,4,5,6,"Common Entrance"],pe={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"},be=e=>{const s=(new Date).getTime(),t=Math.max(0,s-e.getTime()),a=Math.floor(t/1e3),r=Math.floor(a/60),i=Math.floor(r/60),l=Math.floor(i/24);return a<60?`${a}s ago`:r<60?`${r}m ago`:i<24?`${i}h ago`:1===l?"Yesterday":`${l}d ago`},je=e=>e.toLowerCase().replace(/\s+/g,"-"),fe=e=>P(e),ve={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},Ne={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ye=a.memo(({stats:e})=>{if(!e)return null;const s=[{label:"Lessons",value:e.totalLessonsCompleted,icon:W,color:"blue",subtitle:"Completed"},{label:"Avg Score",value:`${e.averageScore}%`,icon:R,color:"green",subtitle:"Success Rate"},{label:"Streak",value:e.currentStreak,icon:q,color:"orange",subtitle:"Days Active"},{label:"Points",value:e.pointsEarned,icon:G,color:"indigo",subtitle:"Total Earned"}],a={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",gradient:"from-blue-500 to-blue-600",glow:"shadow-blue-500/20"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",gradient:"from-green-500 to-green-600",glow:"shadow-green-500/20"},orange:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-600 dark:text-orange-400",gradient:"from-orange-500 to-orange-600",glow:"shadow-orange-500/20"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",gradient:"from-indigo-500 to-indigo-600",glow:"shadow-indigo-500/20"}};return t.jsx(de.div,{variants:Ne,initial:"hidden",animate:"visible",className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-8 sm:mb-12",role:"region","aria-label":"Learning statistics",children:s.map((e,s)=>{const r=e.icon,i=a[e.color],l=(n="number"==typeof e.value?e.value:parseInt(String(e.value)),"Streak"===(o=e.label)&&n>=5?{direction:"up",percent:15}:"Avg Score"===o&&parseInt(String(n))>=80?{direction:"up",percent:12}:"Lessons"===o?{direction:"up",percent:8}:"Points"===o?{direction:"up",percent:10}:{direction:"neutral",percent:0});var n,o;const d="up"===l.direction?F:"down"===l.direction?H:O;return t.jsx(de.div,{variants:ve,whileHover:{scale:1.05,y:-5},transition:{type:"spring",stiffness:300},children:t.jsxs(j,{className:`hover:shadow-xl transition-all duration-300 border-0 ${i.glow} hover:shadow-2xl overflow-hidden relative`,children:[t.jsx(de.div,{className:`absolute inset-0 bg-gradient-to-br ${i.gradient} opacity-[0.03]`,animate:{scale:[1,1.1,1],opacity:[.03,.05,.03]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),t.jsxs(f,{className:"p-4 sm:p-6 relative",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx(de.div,{className:`p-2 sm:p-2.5 ${i.bg} rounded-xl shadow-sm`,"aria-hidden":"true",whileHover:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:t.jsx(r,{className:`w-5 h-5 sm:w-6 sm:h-6 ${i.text}`})}),"neutral"!==l.direction&&t.jsxs(de.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold "+("up"===l.direction?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[t.jsx(d,{className:"w-3 h-3"}),t.jsxs("span",{children:[l.percent,"%"]})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground block",children:e.label}),t.jsx(ce,{mode:"wait",children:t.jsx(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-3xl sm:text-4xl font-bold bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent","aria-label":`${e.label}: ${e.value}`,children:e.value},e.value)}),t.jsx("p",{className:"text-xs text-muted-foreground",children:e.subtitle})]}),t.jsx("div",{className:"mt-3 flex gap-0.5 h-1",children:[...Array(12)].map((e,s)=>t.jsx(de.div,{className:`flex-1 rounded-full ${i.bg}`,initial:{scaleY:.3},animate:{scaleY:.7*Math.random()+.3},transition:{duration:1,delay:.1*s,repeat:1/0,repeatType:"reverse"}},s))})]})]})},e.label)})})}),we={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},ke=a.memo(({data:e,selectedGrade:s,onAddToWishlist:a,isInWishlist:i})=>{const n=r();if(!e)return null;const{lesson:o,progress:d=0}=e,c=s||o.grade,g=je(o.subject),u=o.duration||30,p=Math.ceil(u*(1-d/100)),b=()=>{n(`/grade/${c}/${g}/lesson/${o.id}`)};return t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:we,transition:{duration:.5,delay:.2},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Continue Learning"}),t.jsxs(w,{variant:"outline",className:"gap-2",children:[t.jsx(F,{className:"w-3 h-3"}),d,"% Complete"]})]}),t.jsx(de.div,{whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:t.jsx(j,{className:"group hover:shadow-2xl transition-all duration-300 border-2 border-indigo-100 dark:border-indigo-900 overflow-hidden",children:t.jsxs(m,{openDelay:200,closeDelay:150,children:[t.jsx(x,{asChild:!0,children:t.jsxs("div",{className:"flex flex-col md:flex-row cursor-pointer",onClick:b,role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&b(),"aria-label":`Continue learning ${o.title}`,children:[t.jsxs("div",{className:"relative h-48 md:h-auto md:w-64 bg-gradient-to-br from-blue-500 via-indigo-500 to-cyan-500 flex-shrink-0 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"relative",children:[t.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[t.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"rgba(255,255,255,0.2)",strokeWidth:"8",fill:"none"}),t.jsx(de.circle,{cx:"64",cy:"64",r:"56",stroke:"white",strokeWidth:"8",fill:"none",strokeLinecap:"round",initial:{strokeDasharray:"0 352"},animate:{strokeDasharray:d/100*352+" 352"},transition:{duration:1,ease:"easeOut"}})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Y,{className:"w-12 h-12 text-white","aria-hidden":"true"})})]})}),t.jsx("div",{className:"absolute top-3 left-3",children:t.jsx(w,{className:"font-semibold shadow-lg",children:o.subject})}),t.jsx("div",{className:"absolute bottom-3 left-3",children:t.jsxs(w,{variant:"secondary",className:"bg-white/90 text-indigo-700 font-bold",children:[d,"% Done"]})})]}),t.jsx(f,{className:"p-4 sm:p-6 flex-1",children:t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold group-hover:text-indigo-600 transition-colors flex-1",children:o.title}),d>0&&t.jsx(de.div,{initial:{scale:0},animate:{scale:1},className:"ml-2",children:t.jsx(V,{className:"w-5 h-5 text-green-500"})})]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:o.description}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-muted-foreground",children:"Your Progress"}),t.jsxs("span",{className:"font-semibold text-indigo-600",children:[d,"%"]})]}),t.jsx(k,{value:d,className:"h-2"})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-2 py-3 px-3 bg-muted/30 rounded-lg mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx(Y,{className:"w-4 h-4 mx-auto mb-1 text-blue-600","aria-hidden":"true"}),t.jsx("p",{className:"text-xs font-medium truncate",children:o.subject})]}),t.jsxs("div",{className:"text-center",children:[t.jsx(B,{className:"w-4 h-4 mx-auto mb-1 text-indigo-600","aria-hidden":"true"}),t.jsxs("p",{className:"text-xs font-medium",children:["Grade ",o.grade]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx(K,{className:"w-4 h-4 mx-auto mb-1 text-orange-600","aria-hidden":"true"}),t.jsxs("p",{className:"text-xs font-medium",children:[p,"m left"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx(R,{className:"w-4 h-4 mx-auto mb-1 text-green-600","aria-hidden":"true"}),t.jsx("p",{className:"text-xs font-medium capitalize",children:o.difficulty||"Medium"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(l,{className:"flex-1 gap-2 font-semibold",onClick:e=>{e.preventDefault(),e.stopPropagation(),b()},children:[t.jsx(_,{className:"w-4 h-4"}),"Continue Learning"]}),t.jsx(l,{variant:"outline",className:"gap-2",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(o.subject,o.grade,o.term)},disabled:i(o.subject,o.grade,o.term),"aria-label":"Add to wishlist",children:t.jsx(Q,{className:"w-4 h-4 "+(i(o.subject,o.grade,o.term)?"fill-current text-red-500":"")})})]})]})})]})}),t.jsx(h,{className:"w-96",side:"right",align:"start",sideOffset:10,children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-semibold",children:o.title}),t.jsx("p",{className:"text-sm text-muted-foreground",children:o.description}),t.jsxs("div",{className:"flex gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Subject"}),t.jsx("p",{className:"font-medium",children:o.subject})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Grade"}),t.jsx("p",{className:"font-medium",children:o.grade})]})]})]})})]})})})]})}),Se={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},Ce={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},$e=a.memo(({activities:e})=>{if(!e||0===e.length)return null;return t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Se,transition:{duration:.5,delay:.4},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Recent Activity"}),t.jsxs(w,{variant:"outline",className:"gap-2",children:[t.jsx(V,{className:"w-3 h-3"}),e.length," Activities"]})]}),t.jsx(j,{className:"overflow-hidden",children:t.jsxs(f,{className:"p-4 sm:p-6",children:[t.jsxs(de.div,{variants:Ce,initial:"hidden",animate:"visible",className:"relative space-y-0",role:"list","aria-label":"Recent learning activities",children:[t.jsx("div",{className:"absolute left-[19px] sm:left-[23px] top-6 bottom-6 w-0.5 bg-gradient-to-b from-indigo-200 via-blue-200 to-transparent dark:from-indigo-800 dark:via-blue-800","aria-hidden":"true"}),e.slice(0,5).map((s,a)=>{const r=(i=s.type,l=s.score,"quiz"===i?l&&l>=90?{icon:X,color:"text-yellow-500",bg:"bg-yellow-100 dark:bg-yellow-900/30"}:{icon:U,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"}:{icon:Y,color:"text-indigo-500",bg:"bg-indigo-100 dark:bg-indigo-900/30"});var i,l;const n=r.icon,o=a===e.length-1||4===a;return t.jsxs(de.div,{variants:Se,whileHover:{x:5},transition:{type:"spring",stiffness:300},className:"relative flex items-start gap-3 sm:gap-4 p-3 sm:p-4 rounded-lg transition-colors hover:bg-muted/30 "+(o?"":"pb-6"),role:"listitem",children:[t.jsx(de.div,{className:`relative z-10 p-2 sm:p-2.5 ${r.bg} rounded-xl shadow-sm flex-shrink-0`,"aria-hidden":"true",initial:{scale:0},animate:{scale:1},transition:{delay:.1*a,type:"spring"},children:t.jsx(n,{className:`w-4 h-4 sm:w-5 sm:h-5 ${r.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-sm sm:text-base truncate leading-tight",children:s.title}),t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:s.subject})]}),t.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:"number"==typeof s.score&&t.jsx(de.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.1*a+.2,type:"spring"},children:t.jsxs(w,{variant:s.score>=80?"default":s.score>=60?"secondary":"destructive",className:"text-xs font-bold","aria-label":`Score: ${s.score}%`,children:[s.score,"%"]})})})]}),t.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground mt-1",children:[t.jsx(K,{className:"w-3 h-3"}),t.jsx("span",{children:s.time})]})]})]},s.id)})]}),e.length>5&&t.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-4 pt-4 border-t text-center",children:t.jsxs("button",{className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:["View All Activities (",e.length,")"]})})]})})]})}),Ae={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},De={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Me=a.memo(({stats:e})=>{if(!e)return null;const s=[{id:"first-lesson",title:"First Steps",description:"Complete your first lesson",icon:Y,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",progress:e.totalLessonsCompleted>=1?100:0,unlocked:e.totalLessonsCompleted>=1,points:50},{id:"streak-3",title:"On Fire!",description:"Maintain a 3-day streak",icon:q,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30",progress:Math.min(e.currentStreak/3*100,100),unlocked:e.currentStreak>=3,points:100},{id:"lessons-10",title:"Dedicated Learner",description:"Complete 10 lessons",icon:R,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",progress:Math.min(e.totalLessonsCompleted/10*100,100),unlocked:e.totalLessonsCompleted>=10,points:200},{id:"score-90",title:"Excellence",description:"Score 90% or above",icon:Z,color:"text-yellow-600",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",progress:e.averageScore>=90?100:e.averageScore/90*100,unlocked:e.averageScore>=90,points:150},{id:"streak-7",title:"Week Warrior",description:"Maintain a 7-day streak",icon:J,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",progress:Math.min(e.currentStreak/7*100,100),unlocked:e.currentStreak>=7,points:300},{id:"points-1000",title:"Point Master",description:"Earn 1000 points",icon:ee,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30",progress:Math.min(e.pointsEarned/1e3*100,100),unlocked:e.pointsEarned>=1e3,points:500}],a=s.filter(e=>e.unlocked).length,r=s.filter(e=>e.unlocked).reduce((e,s)=>e+s.points,0),i=Array.from({length:7},(s,t)=>{const a=6-t;return{day:["S","M","T","W","T","F","S"][new Date(Date.now()-864e5*a).getDay()],active:a<e.currentStreak}});return t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Ae,transition:{duration:.5,delay:.3},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Achievements & Streaks"}),t.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a," of ",s.length," unlocked â€¢ ",r," points earned"]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(w,{variant:"outline",className:"gap-2",children:[t.jsx(G,{className:"w-3 h-3"}),"Level ",Math.floor(e.pointsEarned/100)+1]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(de.div,{variants:De,initial:"hidden",animate:"visible",className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:s.map(e=>{const s=e.icon;return t.jsx(de.div,{variants:Ae,whileHover:{scale:e.unlocked?1.05:1.02,y:-5},transition:{type:"spring",stiffness:300},children:t.jsx(j,{className:"h-full transition-all duration-300 "+(e.unlocked?"border-2 border-indigo-200 dark:border-indigo-800 shadow-lg hover:shadow-xl":"opacity-60 grayscale hover:grayscale-0"),children:t.jsxs(f,{className:"p-4 relative",children:[e.unlocked&&t.jsx(de.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.2},className:"absolute top-2 right-2",children:t.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:t.jsx(X,{className:"w-4 h-4 text-white"})})}),t.jsx(de.div,{className:`w-14 h-14 ${e.bgColor} rounded-xl flex items-center justify-center mb-3 mx-auto`,whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:t.jsx(s,{className:`w-7 h-7 ${e.color}`})}),t.jsx("h3",{className:"font-bold text-sm text-center mb-1",children:e.title}),t.jsx("p",{className:"text-xs text-muted-foreground text-center mb-3 line-clamp-2",children:e.description}),!e.unlocked&&t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-muted-foreground",children:"Progress"}),t.jsxs("span",{className:"font-semibold",children:[Math.round(e.progress),"%"]})]}),t.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:t.jsx(de.div,{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",initial:{width:0},animate:{width:`${e.progress}%`},transition:{duration:1,ease:"easeOut"}})})]}),e.unlocked&&t.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs font-semibold text-indigo-600",children:[t.jsx(se,{className:"w-3 h-3"}),e.points," pts"]})]})})},e.id)})})}),t.jsx("div",{children:t.jsx(j,{className:"h-full",children:t.jsxs(f,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:t.jsx(q,{className:"w-5 h-5 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold",children:"Current Streak"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep it going!"})]})]}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.3},className:"text-5xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:e.currentStreak}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"days in a row"})]}),t.jsx("div",{className:"flex justify-between gap-2 mb-4",children:i.map((e,s)=>t.jsx(de.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1*s},className:"flex-1",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-full aspect-square rounded-lg flex items-center justify-center text-xs font-semibold mb-1 transition-all "+(e.active?"bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg":"bg-muted text-muted-foreground"),children:e.active&&t.jsx(q,{className:"w-4 h-4"})}),t.jsx("span",{className:"text-xs text-muted-foreground",children:e.day})]})},s))}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsx("span",{className:"text-muted-foreground",children:"Next milestone:"}),t.jsx("span",{className:"font-semibold",children:"7 days"})]}),t.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:t.jsx(de.div,{className:"h-full bg-gradient-to-r from-orange-500 to-red-500",initial:{width:0},animate:{width:`${Math.min(e.currentStreak/7*100,100)}%`},transition:{duration:1,ease:"easeOut"}})})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[t.jsx(te,{className:"w-4 h-4"}),t.jsx("span",{children:"Study every day to grow your streak"})]})]})})})]})]})}),Te={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},Le=a.memo(({stats:e,weeklySeries:s=[]})=>{if(!e)return null;const a=s.length>0?s:[3,5,4,7,6,8,5],r=Math.max(...a,10),i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],l=[{icon:F,color:"text-green-600",bg:"bg-green-100 dark:bg-green-900/30",title:"Great Progress!",description:`You've completed ${e.totalLessonsCompleted} lessons this month`},{icon:R,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",title:"High Performance",description:`Your average score is ${e.averageScore}%`},{icon:J,color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/30",title:"Consistent Learner",description:`${e.currentStreak} day streak - keep it up!`}];return t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Te,transition:{duration:.5,delay:.4},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Learning Analytics"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track your progress and performance"})]}),t.jsxs(w,{variant:"outline",className:"gap-2",children:[t.jsx(U,{className:"w-3 h-3"}),"Last 7 Days"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(j,{children:t.jsxs(f,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"font-bold text-lg",children:"Weekly Activity"}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Y,{className:"w-4 h-4"}),t.jsxs("span",{children:[a.reduce((e,s)=>e+s,0)," lessons"]})]})]}),t.jsx("div",{className:"flex items-end justify-between gap-2 h-48 mb-4",children:a.map((e,s)=>t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[t.jsx(de.div,{className:"w-full bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t-lg relative group cursor-pointer",initial:{height:0},animate:{height:e/r*100+"%"},transition:{duration:.5,delay:.1*s},whileHover:{scale:1.05},children:t.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",children:[e," lessons"]})})}),t.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:i[s]})]},s))}),t.jsxs("div",{className:"pt-6 border-t",children:[t.jsx("h4",{className:"font-semibold mb-4",children:"Subject Performance"}),t.jsx("div",{className:"space-y-3",children:[{subject:"Mathematics",score:85,lessons:12,color:"bg-blue-500"},{subject:"English",score:92,lessons:15,color:"bg-green-500"},{subject:"Science",score:78,lessons:10,color:"bg-purple-500"},{subject:"ICT",score:88,lessons:8,color:"bg-orange-500"}].map((e,s)=>t.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:[t.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${e.color}`}),t.jsx("span",{className:"text-sm font-medium",children:e.subject}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",e.lessons," lessons)"]})]}),t.jsxs("span",{className:"text-sm font-bold",children:[e.score,"%"]})]}),t.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:t.jsx(de.div,{className:`h-full ${e.color}`,initial:{width:0},animate:{width:`${e.score}%`},transition:{duration:1,delay:.1*s+.3}})})]},e.subject))})]})]})})}),t.jsx("div",{children:t.jsx(j,{className:"h-full",children:t.jsxs(f,{className:"p-6",children:[t.jsx("h3",{className:"font-bold text-lg mb-4",children:"Your Insights"}),t.jsx("div",{className:"space-y-4",children:l.map((e,s)=>{const a=e.icon;return t.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"p-4 rounded-lg border hover:border-indigo-300 transition-colors",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2 ${e.bg} rounded-lg flex-shrink-0`,children:t.jsx(a,{className:`w-5 h-5 ${e.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-semibold text-sm mb-1",children:e.title}),t.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]})},s)})}),t.jsxs("div",{className:"mt-6 pt-6 border-t",children:[t.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Study Pattern"}),t.jsx("div",{className:"grid grid-cols-7 gap-1.5",children:Array.from({length:28},(e,s)=>{const a=Math.floor(4*Math.random());return t.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.01*s},className:`aspect-square rounded-sm ${["bg-muted","bg-green-200 dark:bg-green-900/40","bg-green-400 dark:bg-green-700/60","bg-green-600 dark:bg-green-500"][a]} cursor-pointer hover:ring-2 hover:ring-indigo-400 transition-all`,title:`Day ${s+1}`},s)})}),t.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-muted-foreground",children:[t.jsx("span",{children:"Less"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-sm bg-muted"}),t.jsx("div",{className:"w-3 h-3 rounded-sm bg-green-200 dark:bg-green-900/40"}),t.jsx("div",{className:"w-3 h-3 rounded-sm bg-green-400 dark:bg-green-700/60"}),t.jsx("div",{className:"w-3 h-3 rounded-sm bg-green-600 dark:bg-green-500"})]}),t.jsx("span",{children:"More"})]})]})]})})})]})]})}),Ee=()=>t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx("div",{className:"pt-24 container mx-auto px-4",children:t.jsxs("div",{className:"animate-pulse space-y-8",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded w-1/3"}),t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded w-1/4"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>t.jsx(j,{children:t.jsxs(f,{className:"p-6",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded mb-3"}),t.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-800 rounded w-2/3"})]})},e))}),[1,2,3].map(e=>t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-800 rounded w-1/4"}),t.jsx(j,{children:t.jsx(f,{className:"p-6",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded"}),t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded w-5/6"}),t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded w-4/6"})]})})})]},e))]})})});class ze extends a.Component{constructor(e){super(e),s(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:t.jsxs(j,{className:"max-w-md w-full",children:[t.jsxs(v,{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-full",children:t.jsx(ae,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx(N,{children:"Something went wrong"})]}),t.jsx(y,{children:"We encountered an error while loading your dashboard. Please try refreshing the page."})]}),t.jsxs(f,{children:[this.state.error&&t.jsxs("details",{className:"mb-4 p-3 bg-gray-100 dark:bg-gray-800 rounded text-sm",children:[t.jsx("summary",{className:"cursor-pointer font-medium mb-2",children:"Error details"}),t.jsx("pre",{className:"text-xs overflow-auto",children:this.state.error.message})]}),t.jsxs(l,{onClick:this.handleReset,className:"w-full gap-2",children:[t.jsx(re,{className:"w-4 h-4"}),"Reload Dashboard"]})]})]})}):this.props.children}}const Ie={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},Pe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},We=()=>{const{user:e,loading:s}=n(),{addToCart:v,isInCart:N}=o(),{addToWishlist:y,isInWishlist:P}=d(),q=r(),G=a.useRef(null),{studentInfo:F,isLoading:H,setStudentInfo:O}=(e=>{const[s,t]=a.useState(null),[r,l]=a.useState(!0),[n,o]=a.useState(null),{toast:d}=i();return a.useEffect(()=>{(async()=>{if(e)try{l(!0),o(null);const s=await c(e);if(!s)throw new Error("Failed to fetch student information");t({fullName:s.fullName,grade:s.grade,schoolName:s.schoolName})}catch(s){o(s),d({title:"Error",description:"Failed to load student information. Please try again.",variant:"destructive"})}finally{l(!1)}else l(!1)})()},[e,d]),{studentInfo:s,isLoading:r,error:n,setStudentInfo:t}})(null==e?void 0:e.id),{selectedGrade:V,setSelectedGrade:_,selectedTerm:X,setSelectedTerm:U,availableTerms:Z,subjects:J,displayedSubjects:ee,allGradeLessons:se,hasMoreSubjects:te,loadMoreSubjects:ae,loadingTerms:re}=(e=>{const[s,t]=a.useState(e||""),[r,l]=a.useState(""),[n,o]=a.useState([]),[d,c]=a.useState([]),[m,x]=a.useState([]),[h,g]=a.useState([]),[u,p]=a.useState(1),[b,j]=a.useState(!1),[f,v]=a.useState(!1),[N,y]=a.useState(!1),{toast:w}=i();a.useEffect(()=>{(async()=>{if(s)try{v(!0);const e=await M(s);o(e),l(""),c([]),v(!1),T(void 0,s).then(e=>g(e)).catch(e=>{})}catch(e){w({title:"Error",description:"Failed to load terms. Please try again.",variant:"destructive"}),v(!1)}})()},[s,w]),a.useEffect(()=>{(async()=>{if(s&&r)try{y(!0);const e=await L(s,r);c(e),p(1),x(e.slice(0,8)),j(e.length>8)}catch(e){w({title:"Error",description:"Failed to load subjects. Please try again.",variant:"destructive"})}finally{y(!1)}})()},[s,r,w]);const k=a.useCallback(()=>{if(!b||N)return;const e=8*u,s=e+8,t=d.slice(e,s);t.length>0?(x(e=>[...e,...t]),p(e=>e+1),j(s<d.length)):j(!1)},[d,u,b,N]);return{selectedGrade:s,setSelectedGrade:t,selectedTerm:r,setSelectedTerm:l,availableTerms:n,subjects:d,displayedSubjects:m,allGradeLessons:h,hasMoreSubjects:b,loadMoreSubjects:k,loadingTerms:f,loadingSubjects:N}})(null==F?void 0:F.grade),[ce,ve]=a.useState([]),[Ne,we]=a.useState({}),[Se,Ce]=a.useState([]),{stats:Ae,weeklySeries:De}=xe(ce,se),Te=((e,s)=>a.useMemo(()=>{if(!e||!s||0===s.length)return null;const t=new Map(s.map(e=>[e.id,e])),a=[...e].filter(e=>!e.completed).sort((e,s)=>new Date(s.lastAccessedAt).getTime()-new Date(e.lastAccessedAt).getTime()).find(e=>t.has(e.lessonId));if(a){const e=t.get(a.lessonId),s=a.quizScore||(a.timeSpent?Math.min(a.timeSpent/30,100):0);return{lesson:e,lastAccessed:new Date(a.lastAccessedAt),progress:Math.round(s)}}return null},[e,s]))(ce,se),We=((e,s)=>a.useMemo(()=>{if(!e||!s||0===s.length)return[];const t=new Map(s.map(e=>[e.id,e]));return[...e].sort((e,s)=>new Date(s.lastAccessedAt).getTime()-new Date(e.lastAccessedAt).getTime()).slice(0,6).map((e,s)=>{const a=t.get(e.lessonId),r="number"==typeof e.quizScore;return{id:`${s}-${e.lessonId}`,type:r?"quiz":"lesson",title:(null==a?void 0:a.title)||(r?"Quiz":"Lesson"),subject:(null==a?void 0:a.subject)||"",score:r?e.quizScore:void 0,time:be(new Date(e.lastAccessedAt)),icon:r?"ðŸ“":"ðŸ“˜"}})},[e,s]))(ce,se),Re=((e,s,t)=>a.useMemo(()=>{var a;if(!e||!s||0===s.length)return[];const r=new Map;for(const t of s){const s=r.get(t.subject)||{lessons:[],completedCount:0,total:0,scores:[]};s.lessons.push(t),s.total+=1,e.some(e=>e.lessonId===t.id&&e.completed)&&(s.completedCount+=1);const i=null==(a=e.find(e=>e.lessonId===t.id&&"number"==typeof e.quizScore))?void 0:a.quizScore;"number"==typeof i&&s.scores.push(i),r.set(t.subject,s)}const i=Array.from(r.entries()).map(([e,s])=>{const t=s.total>0?s.completedCount/s.total:0,a=s.scores.length?s.scores.reduce((e,s)=>e+s,0)/s.scores.length:null;return{subject:e,info:s,completionRate:t,avgScore:a}}).sort((e,s)=>{const t=e.avgScore??100,a=s.avgScore??100;return t<70||a<70?t-a:e.completionRate-s.completionRate}),l=[];for(const s of i){const a=me(s.info.lessons,e);if(a){let e="";e=null!==s.avgScore&&s.avgScore<70?`Low quiz score: ${Math.round(s.avgScore)}%`:`Low completion: ${Math.round(100*s.completionRate)}% done`,t&&t.id===a.id||l.push({lesson:a,reason:e})}if(l.length>=3)break}return l},[e,s,t]))(ce,se,null==Te?void 0:Te.lesson),qe=a.useMemo(()=>se&&ce?he.map((e,s)=>{const t=se.filter(s=>s.term===e),a=t.filter(e=>ce.some(s=>s.lessonId===e.id&&s.completed)).length,r=t.length,i=r>0?Math.round(a/r*100):0;return{name:e,icon:"ðŸ“š",progress:i,lessonsCompleted:a,totalLessons:r,color:ge[s%ge.length]}}):[],[se,ce]);a.useEffect(()=>{s||e||q("/auth")},[e,s,q]),a.useEffect(()=>{(async()=>{if(e)try{const[s,t]=await Promise.all([z(e.id),I()]);ve(s||[]),Ce(t||[])}catch(s){}})()},[e]),a.useEffect(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&te&&ae()},{threshold:.1}),s=G.current;return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[te,ae]);const Ge=a.useCallback(async e=>{if(!V||!X)return;const s=e,t=Ne[s];if(!t||!t.desc&&!t.loading){we(e=>({...e,[s]:{...e[s],loading:!0}}));try{const t=await E(e,V,X),a=null==t?void 0:t[0],r=(null==a?void 0:a.description)||"",i=r.length>160?`${r.slice(0,157)}...`:r;we(e=>({...e,[s]:{desc:i,loading:!1}}))}catch{we(e=>({...e,[s]:{desc:void 0,loading:!1}}))}}},[V,X,Ne]),Fe=a.useCallback((e,s,t)=>Se.some(a=>a.subject===e&&a.grade===s&&a.term===t),[Se]),He=a.useCallback(async s=>{if(e)try{_(s);await g(e.id,s)&&O(e=>e?{...e,grade:s}:null)}catch(t){}},[e,_,O]),Oe=a.useCallback(async(e,s,t,a=1200)=>{try{await v({subject:e,grade:s,term:t,price:a})}catch(r){}},[v]),Ye=a.useCallback(async(e,s,t)=>{try{await y({subject:e,grade:s,term:t})}catch(a){}},[y]);if(s||H)return t.jsx(Ee,{});const Ve=(e=>{if(!e)return"Student";const s=e.split(" ")[0];return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()})((null==F?void 0:F.fullName)||(null==e?void 0:e.fullName)||void 0);return t.jsx(ze,{children:t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/20 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900",children:[t.jsx(u,{studentName:(null==F?void 0:F.fullName)||(null==e?void 0:e.fullName)||void 0}),t.jsxs("main",{className:"pt-20 sm:pt-24 pb-12 sm:pb-16 container mx-auto px-4 sm:px-6 max-w-7xl",children:[t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Ie,transition:{duration:.6},className:"mb-8 sm:mb-12 relative",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-purple-400/10 to-pink-400/10 rounded-full blur-3xl -z-10"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-blue-400/10 to-cyan-400/10 rounded-full blur-3xl -z-10"}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-purple-500 to-pink-500 rounded-full"}),t.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500 bg-clip-text text-transparent",children:["Welcome back, ",Ve]})]}),t.jsx(de.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"text-base sm:text-lg text-muted-foreground ml-4",children:"Ready to continue your learning journey? ðŸš€"})]}),t.jsxs(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"flex gap-2",children:[t.jsxs(l,{onClick:()=>q("/browse"),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transition-all",children:[t.jsx(Y,{className:"w-4 h-4 mr-2"}),"Browse Courses"]}),t.jsxs(l,{variant:"outline",onClick:()=>q("/my-learning"),className:"border-purple-200 hover:bg-purple-50 dark:border-purple-800 dark:hover:bg-purple-950/50",children:[t.jsx(R,{className:"w-4 h-4 mr-2"}),"My Learning"]})]})]})]}),(!(null==F?void 0:F.grade)||"Not Specified"===(null==F?void 0:F.grade))&&t.jsx(de.div,{variants:Ie,initial:"hidden",animate:"visible",transition:{delay:.2},className:"mb-8",children:t.jsx(j,{className:"border-none bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-[2px] shadow-2xl hover:shadow-3xl transition-all duration-300",children:t.jsx("div",{className:"bg-white dark:bg-gray-950 rounded-lg",children:t.jsx(f,{className:"p-6 sm:p-8",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[t.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[t.jsx("div",{className:"p-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-2xl shadow-lg",children:t.jsx(B,{className:"w-10 h-10 text-indigo-600 dark:text-indigo-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold mb-2 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Discover Your Perfect Learning Level"}),t.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Not sure which grade to start with? Take our quick, interactive assessment to find your ideal starting point and unlock personalized learning paths."}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx(w,{variant:"secondary",className:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300",children:"5 minutes"}),t.jsx(w,{variant:"secondary",className:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",children:"Personalized"})]})]})]}),t.jsxs(l,{onClick:()=>q("/grade-assessment"),size:"lg",className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:["Start Assessment",t.jsx(ie,{className:"ml-2 w-5 h-5"})]})]})})})})}),t.jsx(ye,{stats:Ae}),t.jsx(ke,{data:Te,selectedGrade:V,onAddToWishlist:Ye,isInWishlist:P}),t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Ie,transition:{duration:.5,delay:.3},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Explore Subjects"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose your grade and term to get started"})]}),t.jsxs(l,{variant:"ghost",onClick:()=>q("/all-subjects"),className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50 dark:hover:bg-purple-950/30",children:["View All",t.jsx(le,{className:"w-4 h-4 ml-1"})]})]}),t.jsx(j,{className:"border-none shadow-xl bg-white dark:bg-gray-950",children:t.jsxs(f,{className:"p-6 sm:p-8",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[t.jsx(B,{className:"w-4 h-4 text-purple-600"}),"Select Grade"]}),t.jsxs(S,{value:V,onValueChange:He,children:[t.jsx(C,{className:"h-12 border-2 border-purple-100 hover:border-purple-300 dark:border-purple-900 dark:hover:border-purple-700 transition-colors",children:t.jsx($,{placeholder:"Choose your grade"})}),t.jsx(A,{children:ue.map(e=>t.jsx(D,{value:e.toString(),children:"Common Entrance"===e?e:`Grade ${e}`},e))})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[t.jsx(W,{className:"w-4 h-4 text-pink-600"}),"Select Term"]}),t.jsxs(S,{value:X,onValueChange:U,disabled:!Z.length,children:[t.jsx(C,{className:"h-12 border-2 border-pink-100 hover:border-pink-300 dark:border-pink-900 dark:hover:border-pink-700 transition-colors",children:t.jsx($,{placeholder:re?"Loading...":"Choose a term"})}),t.jsx(A,{children:Z.map(e=>t.jsx(D,{value:e.name,children:e.name},e.name))})]})]})]}),V&&qe.length>0&&t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Term Progress Overview"}),qe.map((e,s)=>t.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border hover:border-indigo-300 transition-colors cursor-pointer group",onClick:()=>q(`/grade/${V}/term/${je(e.name)}`),role:"button",tabIndex:0,onKeyDown:s=>"Enter"===s.key&&q(`/grade/${V}/term/${je(e.name)}`),"aria-label":`View ${e.name} with ${e.lessonsCompleted} out of ${e.totalLessons} lessons completed`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[t.jsx(Y,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("p",{className:"font-medium flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[t.jsx("span",{className:"truncate",children:e.name}),t.jsx(le,{className:"w-3 h-3 sm:w-4 sm:h-4 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.lessonsCompleted,"/",e.totalLessons," lessons"]})]})]}),t.jsxs("span",{className:"text-xs sm:text-sm font-semibold ml-2 flex-shrink-0",children:[e.progress,"%"]})]}),t.jsx(k,{value:e.progress,className:"h-1.5 sm:h-2","aria-label":`Progress: ${e.progress}%`})]},s))]})]})})]}),t.jsx($e,{activities:We}),t.jsx(Me,{stats:Ae}),t.jsx(Le,{stats:Ae,weeklySeries:De}),Re&&Re.length>0&&t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Ie,transition:{duration:.5,delay:.5},className:"mb-8 sm:mb-12",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Recommended for You"}),t.jsxs(l,{variant:"link",onClick:()=>q("/my-learning"),className:"text-sm sm:text-base",children:["View All ",t.jsx(le,{className:"w-4 h-4 ml-1"})]})]}),t.jsx(de.div,{variants:Pe,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",role:"list","aria-label":"Recommended lessons",children:Re.map((e,s)=>{const a=V||e.lesson.grade,r=je(e.lesson.subject);return t.jsx(de.div,{variants:Ie,whileHover:{y:-5},transition:{type:"spring",stiffness:300},className:"relative z-0 hover:z-10",role:"listitem",children:t.jsx(j,{className:"h-full hover:shadow-lg transition-shadow group overflow-hidden",children:t.jsxs("div",{className:"cursor-pointer h-full",onClick:()=>q(`/grade/${a}/${r}/lesson/${e.lesson.id}`),role:"button",tabIndex:0,onKeyDown:s=>"Enter"===s.key&&q(`/grade/${a}/${r}/lesson/${e.lesson.id}`),"aria-label":`Learn ${e.lesson.title} in ${e.lesson.subject}`,children:[t.jsxs("div",{className:"h-36 sm:h-40 bg-gradient-to-br from-blue-500 via-indigo-500 to-cyan-500 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Y,{className:"w-10 h-10 sm:w-12 sm:h-12 text-white opacity-90","aria-hidden":"true"})}),e.lesson.difficulty&&t.jsx("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3",children:t.jsx(w,{className:`text-xs font-semibold ${pe[e.lesson.difficulty]||"bg-gray-500"}`,children:e.lesson.difficulty})}),e.lesson.duration&&t.jsx("div",{className:"absolute bottom-2 right-2 sm:bottom-3 sm:right-3",children:t.jsxs(w,{variant:"secondary",className:"text-xs gap-1 bg-white/90",children:[t.jsx(K,{className:"w-3 h-3"}),e.lesson.duration," min"]})})]}),t.jsxs(f,{className:"p-4 sm:p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[t.jsx(w,{variant:"outline",className:"text-xs font-medium",children:e.lesson.subject}),t.jsx("span",{className:"text-sm font-bold text-indigo-600",children:fe(e.lesson.price||1200)})]}),t.jsx("h3",{className:"font-bold text-sm sm:text-base mb-1.5 sm:mb-2 group-hover:text-indigo-600 transition-colors line-clamp-2 leading-tight",children:e.lesson.title}),t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 sm:mb-3 line-clamp-2",children:e.lesson.description}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs text-muted-foreground",children:[t.jsx(R,{className:"w-3 h-3"}),t.jsx("span",{className:"line-clamp-1",children:e.reason})]}),t.jsx(ie,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-indigo-600 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})]})]})})},s)})})]}),X&&J.length>0&&t.jsxs(de.div,{initial:"hidden",animate:"visible",variants:Ie,transition:{duration:.5,delay:.6},className:"mb-8 sm:mb-12",children:[t.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:[X," Subjects"]})}),t.jsx(de.div,{variants:Pe,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",role:"list","aria-label":"Available subjects",children:ee.map(e=>{var s,a,r;return t.jsx(de.div,{variants:Ie,whileHover:{y:-5},transition:{type:"spring",stiffness:300},className:"relative z-0 hover:z-10",role:"listitem",children:t.jsxs(m,{openDelay:150,closeDelay:100,onOpenChange:s=>s&&Ge(e.name),children:[t.jsx(x,{asChild:!0,children:t.jsx(j,{className:"h-full hover:shadow-md transition-shadow group cursor-pointer",onClick:()=>{const s=je(e.name),t=je(X);q(`/subject/${s}?grade=${V}&term=${t}`)},role:"button",tabIndex:0,onKeyDown:s=>{if("Enter"===s.key){const s=je(e.name),t=je(X);q(`/subject/${s}?grade=${V}&term=${t}`)}},"aria-label":`Explore ${e.name} with ${e.lessonCount} lessons`,children:t.jsxs(f,{className:"p-4 sm:p-5",children:[Fe(e.name,V,X)&&t.jsx("div",{className:"absolute top-2 right-2 z-10",children:t.jsx(w,{className:"bg-green-500 text-white border-0 text-xs",children:"âœ“ Purchased"})}),t.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold mb-1 group-hover:text-indigo-600 transition-colors text-sm sm:text-base truncate",children:e.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.lessonCount," ",1===e.lessonCount?"lesson":"lessons"]})]}),t.jsx(le,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 ml-2"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 md:hidden",children:Fe(e.name,V,X)?t.jsxs(l,{variant:"default",size:"sm",className:"col-span-2 bg-green-600 hover:bg-green-700 text-white",onClick:s=>{s.stopPropagation(),q(`/subjects/${V}/${e.name}${X?`?term=${X}`:""}`)},children:[t.jsx(Y,{className:"w-3 h-3 mr-1"}),"View Course"]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{variant:"outline",size:"sm",className:"w-full",onClick:s=>{s.stopPropagation(),Oe(e.name,V,X,e.price||0)},disabled:N(e.name,V||"",X||""),children:N(e.name,V||"",X||"")?"In Cart":`Add (${fe(e.price||0)})`}),t.jsx(l,{variant:"secondary",size:"sm",className:"w-full",onClick:s=>{s.stopPropagation(),Ye(e.name,V,X)},disabled:P(e.name,V||"",X||""),children:P(e.name,V||"",X||"")?"Saved":"Wishlist"})]})})]})})}),t.jsx(h,{className:"w-full",side:"top",align:"center",sideOffset:5,children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Subject"}),t.jsx("h4",{className:"font-semibold",children:e.name})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),t.jsx("p",{className:"font-semibold",children:fe(e.price||0)})]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-muted-foreground",children:"About"}),(null==(s=Ne[e.name])?void 0:s.loading)?t.jsx("p",{className:"italic text-muted-foreground",children:"Loading detailsâ€¦"}):(null==(a=Ne[e.name])?void 0:a.desc)?t.jsx("p",{className:"font-medium",children:null==(r=Ne[e.name])?void 0:r.desc}):t.jsxs("p",{className:"text-muted-foreground",children:["Start learning ",e.name," this term."]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Grade"}),t.jsx("p",{className:"font-medium",children:V||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted-foreground",children:"Term"}),t.jsx("p",{className:"font-medium",children:X||"-"})]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"text-muted-foreground",children:"Lessons"}),t.jsx("p",{className:"font-medium",children:e.lessonCount})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[t.jsxs(l,{size:"sm",className:"w-full gap-2",onClick:s=>{s.preventDefault(),s.stopPropagation(),Oe(e.name,V,X,e.price||0)},disabled:N(e.name,V||"",X||""),children:[t.jsx(ne,{className:"w-4 h-4"}),N(e.name,V||"",X||"")?"In Cart":`Add (${fe(e.price||0)})`]}),t.jsxs(l,{variant:"secondary",size:"sm",className:"w-full gap-2",onClick:s=>{s.preventDefault(),s.stopPropagation(),Ye(e.name,V,X)},disabled:P(e.name,V||"",X||""),children:[t.jsx(Q,{className:"w-4 h-4"}),P(e.name,V||"",X||"")?"Saved":"Wishlist"]})]})]})})]})},e.name)})}),te&&t.jsxs("div",{ref:G,className:"flex justify-center py-8","aria-live":"polite",children:[t.jsx(oe,{className:"w-6 h-6 animate-spin text-muted-foreground"}),t.jsx("span",{className:"sr-only",children:"Loading more subjects..."})]})]})]}),t.jsx(p,{}),t.jsx(b,{})]})})};export{We as default};
