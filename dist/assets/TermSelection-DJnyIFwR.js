import{j as s}from"./ui-BFkRrjhf.js";import{j as e,h as a,r as t}from"./vendor-ClsjX3Mm.js";import{a as r,u as i,B as c}from"./index-CgruMJ9X.js";import{C as l,b as n,c as o,d as m,a as d}from"./card-COhXL4y3.js";import{getSubjectsByGrade as x}from"./lessons-BDW73QPv.js";import{m as j}from"./mindsta2-LbsrOUWs.js";import{a3 as h,B as u,D as p,y as g}from"./icons-Udnp6KR8.js";import"./charts-DeubIqjP.js";const f=()=>{const{grade:f,term:N}=e(),b=a(),{user:v}=r(),{toast:y}=i(),[w,C]=t.useState([]),[k,E]=t.useState(!0);t.useEffect(()=>{(async()=>{if(f&&N)try{E(!0);const s=N.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),e=await x(f,s);C(e)}catch(s){y({title:"Error",description:"Failed to load subjects. Please try again.",variant:"destructive"})}finally{E(!1)}})()},[f,N,y]);return v?s.jsxs("div",{className:"min-h-screen bg-muted/20 dark:bg-background",children:[s.jsx("header",{className:"bg-card/90 backdrop-blur-sm shadow border-b sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{variant:"ghost",size:"icon",onClick:()=>b(-1),children:s.jsx(h,{className:"w-5 h-5"})}),s.jsxs("h1",{className:"text-xl font-bold text-foreground",children:["Common Entrance"===f?"Common Entrance":`Grade ${f}`," â€¢ ",N?N.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):""]})]}),s.jsx("img",{src:j,alt:"Mindsta Logo",className:"w-10 h-10 rounded-lg object-contain"})]})})}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(l,{children:[s.jsxs(n,{children:[s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5 text-primary"}),"Subjects"]}),s.jsx(m,{children:"Select a subject to view lessons"})]}),s.jsx(d,{children:k?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4,5].map(e=>s.jsx("div",{className:"h-24 bg-muted animate-pulse rounded-lg"},e))}):w.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(e=>s.jsx(l,{className:"cursor-pointer hover:shadow-sm transition-all group",onClick:()=>b(`/subject/${e.name.toLowerCase().replace(/\s+/g,"-")}?grade=${f}&term=${N}`),children:s.jsx(d,{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(u,{className:"w-5 h-5 text-muted-foreground","aria-hidden":!0}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-medium text-base flex items-center gap-2",children:[e.name,s.jsx(p,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.lessonCount," ",1===e.lessonCount?"lesson":"lessons"]})]})]})})})},e.name))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(g,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"text-base font-semibold text-foreground",children:"No subjects available"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There are no subjects for this term yet."}),s.jsx(c,{onClick:()=>b(-1),className:"mt-4",variant:"outline",children:"Go back"})]})})]})})})]}):(b("/auth"),null)};export{f as default};
